/*!
    *
    * Wijmo Library 5.20213.824
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(t,o){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){extendStatics(t,o);function __(){this.constructor=t}t.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)}}();!function(t){!function(o){!function(o){"use strict";var e=function(t){__extends(_MultiRow,t);function _MultiRow(o,e){var n=t.call(this,o)||this;n._idxData=e;return n}return _MultiRow}(t.grid.Row);o._MultiRow=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(o){!function(o){"use strict";var e=function(o){__extends(_Cell,o);function _Cell(e){var n=o.call(this)||this;n._row=n._col=0;n._rowspan=n._colspan=1;t.copy(n,e);return n}Object.defineProperty(_Cell.prototype,"row",{get:function(){return this._row},set:function(o){this._row=t.asInt(o,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"col",{get:function(){return this._col},set:function(o){this._col=t.asInt(o,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"colspan",{get:function(){return this._colspan},set:function(o){this._colspan=t.asInt(o,!1,!0);t.assert(this._colspan>0,"colspan must be >= 1")},enumerable:!0,configurable:!0});Object.defineProperty(_Cell.prototype,"rowspan",{get:function(){return this._rowspan},set:function(o){this._rowspan=t.asInt(o,!1,!0);t.assert(this._rowspan>0,"colspan must be >= 1")},enumerable:!0,configurable:!0});return _Cell}(t.grid.Column);o._Cell=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(o){!function(o){"use strict";var e=function(e){__extends(_CellGroup,e);function _CellGroup(o,n){var r=e.call(this)||this;r._colstart=0;r._rowstart=0;r._layout=o;r._g=o._grid;t.copy(r,n);if(!r._cells)throw"Cell group with no cells?";var i=0,l=0;r._cells.forEach((function(t,o){for(;!r._cellFits(t,o,i,l);)0==(l=(l+1)%r.colspan)&&i++;t.row=i;t.col=l}));var s=1,a=1;r._cells.forEach((function(t){s=Math.max(s,t.row+t.rowspan);a=Math.max(a,t.col+t.colspan)}));r.rowspan=s;r.colspan=a;return r}_CellGroup.prototype._copy=function(e,n){var r=this;if("cells"==e){this._cells=[];t.isArray(n)&&n.forEach((function(e){var n=new o._Cell(e);n.binding&&!n.header&&(n.header=t.toHeaderCase(n.binding));r._cells.push(n);r.colspan=Math.max(r.colspan,n.colspan)}));return!0}return!1};Object.defineProperty(_CellGroup.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0});_CellGroup.prototype.closeGroup=function(o){var e=this;if(o>this.colspan){this._cells.forEach((function(t){t.col==e.colspan-1&&(t.colspan=o-t.col)}));this.colspan=o}this._cells.forEach((function(t){for(;t.col+t.colspan<e.colspan&&!e._slotTaken(t.row,t.col+t.colspan);)t.colspan++}));this._cells.forEach((function(t){for(;t.row+t.rowspan<e.rowspan&&!e._slotTaken(t.row+t.rowspan,t.col);)t.rowspan++}));for(var n=0;n<this.rowspan;n++)for(var r=0;r<this.colspan;r++)t.assert(this._slotTaken(n,r),"Invalid layout (empty cells).");this._cols=new t.grid.ColumnCollection(this._g,this._g.columns.defaultSize);this._rng=new Array(o*this.rowspan);this._cells.forEach((function(o){for(var n=0;n<o.rowspan;n++)for(var r=0;r<o.colspan;r++){var i=(o.row+n)*e.colspan+(o.col+r);e._cols.setAt(i,o);var l=new t.grid.CellRange(o.row,o.col,o.row+o.rowspan-1,o.col+o.colspan-1);l.isSingleCell||(e._rng[i]=l)}}));this._rng[-1]=new t.grid.CellRange(this._rowstart,this._colstart,this._rowstart+this._rowspan-1,this._colstart)};_CellGroup.prototype.getMergedRange=function(o,e,n){if(n<0)return this._rng[-1];var r=e-this._rowstart,i=n%this.colspan,l=this._rng[r*this.colspan+i];o.cellType==t.grid.CellType.RowHeader&&n++;var s=e-r,a=n-i;return l?new t.grid.CellRange(s+l.row,a+l.col,s+l.row2,a+l.col2):null};_CellGroup.prototype.getBindingColumn=function(t,o,e){if(e<0)return this;var n=o-this._rowstart,r=e%this.colspan;return this._cols[n*this.colspan+r]};_CellGroup.prototype._cellFits=function(t,o,e,n){if(n>0&&n+t.colspan>this.colspan)return!1;for(var r=0;r<t.colspan;r++)if(this._slotTaken(e,n+r,o))return!1;this.colspan=Math.max(this.colspan,n+t.colspan-1);return!0};_CellGroup.prototype._slotTaken=function(t,o,e){void 0===e&&(e=this._cells.length);for(var n=0;n<e;n++){var r=this._cells[n];if(t>=r.row&&t<=r.row+r.rowspan-1&&o>=r.col&&o<=r.col+r.colspan-1)return!0}return!1};_CellGroup.prototype._updateCellTypes=function(o){this._cols.forEach((function(e){var n=e;null==n.dataType&&n._binding&&(n.dataType=t.getType(n._binding.getValue(o)))}))};return _CellGroup}(o._Cell);o._CellGroup=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){var o;(function(o){"use strict";var e=function(e){__extends(_MergeManager,e);function _MergeManager(){return null!==e&&e.apply(this,arguments)||this}_MergeManager.prototype.getMergedRange=function(e,n,r,i){void 0===i&&(i=!0);var l=e.grid;if(n<0||n>=e.rows.length||r<0||r>=e.columns.length)return null;switch(e.cellType){case t.grid.CellType.Cell:case t.grid.CellType.RowHeader:var s=e.rows[n].dataItem._rowInfo.index,a=r;e.cellType==t.grid.CellType.RowHeader&&a--;var u=l._getGroupByRow(n);t.assert(u instanceof o._CellGroup,"Failed to get the group!");var c=u.getMergedRange(e,s,a);if(c){var p=s,d=n;if(n>0){p=e.rows[n-1].dataItem._rowInfo.index;d=n-1}c.row<=p?c.row=d:c.row=n;var g=s,w=n;if(n<e.rows.length-1){g=e.rows[n+1].dataItem._rowInfo.index;w=n+1}c.row2>=g?c.row2=w:c.row2=n}t.assert(!c||c.contains(n,r),"Merged range must contain source cell");return c;case t.grid.CellType.ColumnHeader:var f=l.columnsPerItem,_=r-r%f,h=Math.min(_+f-1,e.columns.length-1);return new t.grid.CellRange(0,_,e.rows.length-1,h);case t.grid.CellType.TopLeft:return new t.grid.CellRange(0,0,e.rows.length-1,e.columns.length-1)}return null};return _MergeManager}(t.grid.MergeManager);o._MergeManager=e})((o=t.grid||(t.grid={})).transposedmultirow||(o.transposedmultirow={}))}(wijmo||(wijmo={}));!function(t){var o;(function(t){"use strict";var o=function(){function _MultiRowLayout(t,o){this._columnsPerItem=1;this._bindingGroups=[];this._groupsByRow={};this._grid=t;this._bindingGroups=this._parseCellGroups(o)}Object.defineProperty(_MultiRowLayout.prototype,"totalRowSpan",{get:function(){var t=this._bindingGroups;if(t&&t.length){var o=t[t.length-1];return o._rowstart+o.rowspan}return 0},enumerable:!0,configurable:!0});_MultiRowLayout.prototype._parseCellGroups=function(o){var e=[],n=1;if(o){for(var r=0,i=0;r<o.length;r++){var l=new t._CellGroup(this,o[r]);l._rowstart=i;i+=l._rowspan;n=Math.max(n,l._colspan);e.push(l)}e.forEach((function(t){t.closeGroup(n)}));this._columnsPerItem=n}return e};_MultiRowLayout.prototype._getGroupByRow=function(t){var o=this._getGroupIndexByRow(t);return o>-1?this._bindingGroups[o]:null};_MultiRowLayout.prototype._getGroupIndexByRow=function(t){var o=this._groupsByRow[t];if(o)return o;for(var e=this._bindingGroups,n=0;n<e.length;n++){var r=e[n];if(t>=r._rowstart&&t<=r._rowstart+r._rowspan-1){this._groupsByRow[t]=n;return n}}return-1};_MultiRowLayout.prototype._updateCellTypes=function(t){this._bindingGroups.forEach((function(o){o._updateCellTypes(t)}))};return _MultiRowLayout}();t._MultiRowLayout=o})((o=t.grid||(t.grid={})).transposedmultirow||(o.transposedmultirow={}))}(wijmo||(wijmo={}));!function(t){!function(o){!function(o){"use strict";var e=function(e){__extends(TransposedMultiRow,e);function TransposedMultiRow(n,r){var i=e.call(this,n)||this;i._currentPos=-1;i._bindingColumns={};i._keyPrefix="item";t.addClass(i.hostElement,"wj-transposed-multirow");i._layout=new o._MultiRowLayout(i,null);i.allowDragging=t.grid.AllowDragging.None;i.allowSorting=t.grid.AllowSorting.None;i.mergeManager=new o._MergeManager;i.formatItem.addHandler(i._formatItem,i);i._rowInfo=new t.grid.ColumnCollection(i,i.columns.defaultSize);i.initialize(r);i._rowInfo.collectionChanged.addHandler(i._rowInfoChanged,i);return i}Object.defineProperty(TransposedMultiRow.prototype,"layoutDefinition",{get:function(){return this._layoutDef},set:function(e){this._layoutDef=t.asArray(e);this._layout=new o._MultiRowLayout(this,e);this._rowInfoChanged()},enumerable:!0,configurable:!0});TransposedMultiRow.prototype.getBindingColumn=function(o,e,n){if(o.cellType!=t.grid.CellType.Cell)return null;var r=o.rows[e].dataItem._rowInfo.index,i=r+"_"+n,l=this._bindingColumns[i];if(l)return l;var s=this._getGroupByRow(e).getBindingColumn(o,r,n);if(s){l=new t.grid.Column;t.grid.FlexGrid._getSerializableProperties(t.grid.Column).forEach((function(t){null!=s[t]&&(l[t]=s[t])}));var a=Math.floor(n/this.columnsPerItem),u=n%this.columnsPerItem;l.binding=this._keyPrefix+a+"_"+u;this._bindingColumns[i]=l}return l};Object.defineProperty(TransposedMultiRow.prototype,"columnsPerItem",{get:function(){return this._layout._columnsPerItem},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowAddNew",{get:function(){return!1},set:function(o){t.assert(!o,"TransposedMultiRow does not support items addition.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowDelete",{get:function(){return!1},set:function(o){t.assert(!o,"TransposedMultiRow does not support items deletion.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowDragging",{get:function(){return t.grid.AllowDragging.None},set:function(o){t.assert(o===t.grid.AllowDragging.None,"TransposedMultiRow does not support dragging.");if(o!==this._alDragging){this._alDragging=o;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowPinning",{get:function(){return!1},set:function(o){t.assert(!o,"TransposedMultiRow does not support pinning.")},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"allowSorting",{get:function(){return t.grid.AllowSorting.None},set:function(o){t.assert(o===t.grid.AllowSorting.None,"TransposedMultiRow does not support sorting.");this._alSorting=o},enumerable:!0,configurable:!0});Object.defineProperty(TransposedMultiRow.prototype,"columnLayout",{get:function(){throw"TransposedMultiRow does not support column layout."},set:function(t){throw"TransposedMultiRow does not support column layout."},enumerable:!0,configurable:!0});TransposedMultiRow.prototype.refresh=function(t){var o=this._rowInfo;if(o._dirty){o._dirty=!1;this._rowInfoChanged()}else e.prototype.refresh.call(this,t)};TransposedMultiRow.prototype.onLoadedRows=function(o){for(var n=this,r=this.columnHeaders.columns,i=0;i<r.length;i++)this.columnHeaders.setCellData(0,i,"");var l=this.columns;for(i=0;i<l.length;i++){var s=l[i];s.align=null;s.dataType=0}var a=this.rowHeaders.columns;this.rows.forEach((function(o){var e=o.dataItem._rowInfo;if(e)for(var r=a.length-2;r>=0;r--){var i=e.headers[r]||t.toHeaderCase(e.bindings[r]);n.rowHeaders.setCellData(o.index,r+1,i)}}));a[0].visible=!1;for(i=1;i<a.length;i++){a[i].align="left";a[i].visible=!0;a[i].width=this.columns.defaultSize}e.prototype.onLoadedRows.call(this,o)};TransposedMultiRow.prototype._getGroupByRow=function(e){var n=this.cells.rows[e].dataItem._rowInfo.index,r=this._layout._getGroupByRow(n);t.assert(r instanceof o._CellGroup,"Failed to get the group!");return r};TransposedMultiRow.prototype._addBoundRow=function(t,e){var n=t[e];this.rows.push(new o._MultiRow(n,e))};TransposedMultiRow.prototype._updateColumnTypes=function(){e.prototype._updateColumnTypes.call(this);var o=this.collectionView;if(t.hasItems(o)&&this._layout){var n=o.items[0]._arr;n&&n.length>0&&this._layout._updateCellTypes(n[0])}};TransposedMultiRow.prototype._getBindingColumn=function(t,o,n){if(this._layout){t==this.cells&&(n=this.getBindingColumn(t,o,n.index));return n}return e.prototype._getBindingColumn.call(this,t,o,n)};TransposedMultiRow.prototype._isTransposed=function(){return!0};TransposedMultiRow.prototype.onRowEditEnded=function(o){if(null!=this._view){var n=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Change);this._view.collectionChanged.raise(this._view,n)}e.prototype.onRowEditEnded.call(this,o)};TransposedMultiRow.prototype._getCollectionView=function(o){var n=null;null!=this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);if(t.isArray(o))o=this._transposeItemsSource(o);else if(o){this._view&&this._view.collectionChanged.removeHandler(this._sourceViewChanged);this._view=t.tryCast(o,"ICollectionView");if(this._view){this._view.collectionChanged.addHandler(this._sourceViewChanged,this);o instanceof t.collections.CollectionView&&(n=o.getError);o=this._transposeItemsSource(this._view.items)}}this.autoGenerateColumns=!0;var r=e.prototype._getCollectionView.call(this,o);r&&this._currentPos>=0&&(r.currentPosition=Math.min(r.items.length-1,this._currentPos));n&&r instanceof t.collections.CollectionView&&(r.getError=function(t,o){if(null==o)return null;var e=t._keys.indexOf(o),r=e%t._bnd.length,i=Math.floor(e/t._bnd.length);return n(t._arr[i],t._bnd[r].path)});return r};TransposedMultiRow.prototype._rowInfoChanged=function(){try{var t=this.collectionView;this._currentPos=t?t.currentPosition:-1;var o=this.selection;this._bindingColumns={};var e=this.itemsSource;this.itemsSource=null;this.itemsSource=e;o&&o.isValid&&(this.selection=o)}finally{this._currentPos=-1}};TransposedMultiRow.prototype._formatItem=function(o,e){var n=this.columnsPerItem,r=e.panel,i=r.cellType,l=r.rows[e.range.row],s=(r.rows[e.range.row2],e.cell);i==t.grid.CellType.RowHeader&&t.toggleClass(s,"wj-group-header",0==e.range.row);if(i==t.grid.CellType.Cell||i==t.grid.CellType.RowHeader){var a=this._getGroupByRow(e.row);t.toggleClass(s,"wj-group-start",a._rowstart==e.range.row);t.toggleClass(s,"wj-group-end",a._rowstart+a._rowspan-1==e.range.row2)}if(n>1&&(i==t.grid.CellType.Cell||i==t.grid.CellType.ColumnHeader)){t.toggleClass(s,"wj-record-start",e.range.col%n==0);t.toggleClass(s,"wj-record-end",e.range.col2%n==n-1)}var u=this.alternatingRowStep;if(u&&i==t.grid.CellType.Cell){var c=this._layout.totalRowSpan,p=this._layout._bindingGroups.length,d=Math.floor(l.dataIndex/c)*p,g=l.dataIndex%c,w=(d+=this._layout._getGroupIndexByRow(g)+1)%(u+1)==0;t.toggleClass(s,"wj-alt",w)}};TransposedMultiRow.prototype._sourceViewChanged=function(t,o){this.activeEditor||this.invalidate()};TransposedMultiRow.prototype._transposeItemsSource=function(o){var e=this,n=new t.collections.ObservableArray;if(this._layout&&this._layout._bindingGroups.length){this._getRowInfo(o).forEach((function(t,r){var i=e._createKeys(o);if(e._supportsProxies()){var l=e._createProxy(o,t,i);n.push(l)}else{var s=e._createTransposedObject(o,t,i);n.push(s)}}));o instanceof t.collections.ObservableArray&&o.collectionChanged.addHandler((function(o,r){if(r.action===t.collections.NotifyCollectionChangedAction.Change)e.activeEditor||e.invalidate();else{var i=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Reset);n.onCollectionChanged(i);e._rowInfoChanged()}}))}return n};TransposedMultiRow.prototype._createKeys=function(t){var o=this,e=Array.apply(null,{length:this.columnsPerItem}),n=t.map((function(t,n){return e.map((function(t,e){return o._keyPrefix+n+"_"+e}))}));return[].concat.apply([],n)};TransposedMultiRow.prototype._supportsProxies=function(){return null!=window.Proxy};TransposedMultiRow.prototype._createProxy=function(o,e,n){var r={_arr:o,_rowInfo:e,_bnd:e.bindings.map((function(o){return new t.Binding(o)})),_keys:n};return new Proxy(r,{ownKeys:function(t){return t._keys},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0,writable:!0}},get:function(t,o){var e=t._keys.indexOf(o);if(e>-1){var n=t._bnd,r=t._arr,i=n.length,l=e%i,s=Math.floor(e/i);return n[l].getValue(r[s])}return t[o]},set:function(o,e,n){var r=o._keys.indexOf(e);if(r>-1){var i=o._bnd,l=o._arr,s=i.length,a=r%s,u=Math.floor(r/s);i[a].setValue(l[u],n);if(l instanceof t.collections.ObservableArray||l instanceof t.collections.CollectionView){var c=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Change,l[u],u);l.onCollectionChanged(c)}return!0}return!1}})};TransposedMultiRow.prototype._createTransposedObject=function(o,e,n){for(var r={_arr:o,_rowInfo:e,_bnd:e.bindings.map((function(o){return new t.Binding(o)})),_keys:n},_loop_1=function(e){var i=n[e];Object.defineProperty(r,i,{enumerable:!0,get:function(){var t=r._bnd,n=t.length,i=e%n,l=Math.floor(e/n);return t[i].getValue(o[l])},set:function(n){var i=r._bnd,l=i.length,s=e%l,a=Math.floor(e/l);i[s].setValue(o[a],n);if(o instanceof t.collections.ObservableArray){var u=new t.collections.NotifyCollectionChangedEventArgs(t.collections.NotifyCollectionChangedAction.Change,o[a],a);o.onCollectionChanged(u)}return!0}})},i=0;i<n.length;i++)_loop_1(i);return r};TransposedMultiRow.prototype._getRowInfo=function(o){var e=[];if(this._layout){for(var n=this.rowHeaders.columns,r=this.columnsPerItem+1;n.length>r;)n.removeAt(n.length-1);for(;n.length<r;)n.push(new t.grid.Column);this._layout._bindingGroups.forEach((function(t){for(var o=0;o<t.rowspan;o++){for(var n={index:t._rowstart+o,bindings:[],headers:[]},r=0;r<t.colspan;r++)for(var i=0;i<t.cells.length;i++){var l=t.cells[i];if(o>=l.row&&o<l.row+l.rowspan&&r>=l.col&&r<l.col+l.colspan){n.bindings.push(l.binding);n.headers.push(l.header);break}}e.push(n)}}))}return e};return TransposedMultiRow}(t.grid.FlexGrid);o.TransposedMultiRow=e}(o.transposedmultirow||(o.transposedmultirow={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(o){o.transposedmultirow||(o.transposedmultirow={}),t._registerModule("wijmo.grid.transposedmultirow",t.grid.transposedmultirow)}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));
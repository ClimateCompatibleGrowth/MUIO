/*!
    *
    * Wijmo Library 5.20213.824
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}();!function(t){!function(e){!function(e){"use strict";var r=function(e){__extends(FlexGridSearch,e);function FlexGridSearch(r,i){var n=e.call(this,r)||this;n._delay=t.Control._SEARCH_DELAY;n._cssMatch="wj-state-match";n._searchAllColumns=!1;n._rxSrch=null;n._rxHilite=null;var o=n.getTemplate();n.applyTemplate("wj-control wj-content wj-flexgridsearch",o,{_tbx:"input",_btn:"btn"},"input");n._filterBnd=n._filter.bind(n);n._tbx.addEventListener("input",(function(){n._toSearch&&clearTimeout(n._toSearch);n._toSearch=setTimeout((function(){n._toSearch=null;n._applySearch()}),n._delay)}));n._btn.addEventListener("click",(function(){n._toSearch&&clearTimeout(n._toSearch);n._toSearch=null;n._tbx.value="";n._applySearch();n.containsFocus()&&n._tbx.focus()}));n.initialize(i);return n}Object.defineProperty(FlexGridSearch.prototype,"grid",{get:function(){return this._g},set:function(e){if((e=t.asType(e,t.grid.FlexGrid,!0))!=this._g){var r=this._g;if(r){r.formatItem.removeHandler(this._formatItem);r.itemsSourceChanged.removeHandler(this._itemsSourceChanged)}r=this._g=e;this._itemsSourceChanged();if(r){r.formatItem.addHandler(this._formatItem,this);r.itemsSourceChanged.addHandler(this._itemsSourceChanged,this)}}},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridSearch.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridSearch.prototype,"text",{get:function(){return this._tbx.value},set:function(e){if(e!=this.text){this._tbx.value=t.asString(e);this._applySearch()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridSearch.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=t.asNumber(e,!1,!0)},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridSearch.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridSearch.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(e){this._cssMatch=t.asString(e)},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridSearch.prototype,"searchAllColumns",{get:function(){return this._searchAllColumns},set:function(e){this._searchAllColumns=t.asBoolean(e)},enumerable:!0,configurable:!0});FlexGridSearch.prototype._formatItem=function(e,r){if(this._rxHilite&&this._cssMatch&&r.panel==e.cells&&!r.getColumn()._getFlag(t.grid.RowColFlags.HasTemplate)&&!r.cell.querySelector("input")){var i=r.cell.innerHTML;this._rxHilite.test(i)&&(r.cell.innerHTML=i.replace(this._rxHilite,'<span class="'+this._cssMatch+'">$1</span>'))}};FlexGridSearch.prototype._itemsSourceChanged=function(){this._cv&&this._cv.filters.remove(this._filterBnd);var e=this._g?this._g.collectionView:null;this._cv=e instanceof t.collections.CollectionView?e:null;this._cv&&this._cv.filters.push(this._filterBnd)};FlexGridSearch.prototype._applySearch=function(){var e=this._g;this._rxSrch=this._rxHilite=null;var r=t.escapeRegExp(this.text).split(" ").filter((function(t){return t}));if(r.length){var n=e&&e.caseSensitiveSearch?"g":"gi";this._rxSrch=new RegExp("(?=.*"+r.join(")(?=.*")+")",n);r=r.map((function(e){return function _escapeHtml(e){e&&t.isString(e)&&(e=e.replace(/[&<>]/g,(function(t){return i[t]})));return null!=e?e.toString():""}(e)}));this._rxHilite=new RegExp("("+r.join("|")+")(?![^<]*>)",n)}var o=e?e.collectionView:null;o instanceof t.collections.CollectionView&&o.refresh()};FlexGridSearch.prototype._filter=function(t){if(this._rxSrch&&this._g){var e=this._getItemText(t);return this._rxSrch.test(e)}return!0};FlexGridSearch.prototype._getItemText=function(e){for(var r=[],i=this._g._getBindingColumns(),n=0;n<i.length;n++){var o=i[n],a=o._binding;if(a&&(o.visible||this.searchAllColumns)){var l=a.getValue(e);l=o.dataMap?o.dataMap.getDisplayValue(l):t.Globalize.format(l,o.format);o.isContentHtml&&(l=t.toPlainText(l));l&&r.push(l)}}return r.join(" ")};FlexGridSearch.controlTemplate='<div class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control"/><span wj-part="btn" class="wj-input-group-btn"><button class="wj-btn wj-btn-default" tabindex="-1">&times</button></span></div></div></div>';return FlexGridSearch}(t.Control);e.FlexGridSearch=r;var i={"&":"&amp;","<":"&lt;",">":"&gt;"}}(e.search||(e.search={}))}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));!function(t){!function(e){e.search||(e.search={}),t._registerModule("wijmo.grid.search",t.grid.search)}(t.grid||(t.grid={}))}(wijmo||(wijmo={}));
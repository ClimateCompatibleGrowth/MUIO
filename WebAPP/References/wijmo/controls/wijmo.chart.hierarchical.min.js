/*!
    *
    * Wijmo Library 5.20213.824
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}();!function(t){!function(e){!function(e){"use strict";var i=function(){function HierarchicalUtil(){}HierarchicalUtil.parseDataToHierarchical=function(e,i,r,a){var o,n=[];if(e instanceof t.collections.CollectionView&&e.groups.length>0)n=HierarchicalUtil.parseGroupCV(e,i);else if(e.length>0){t.isString(r)&&r.indexOf(",")>-1&&(r=r.split(","));if(a)n=HierarchicalUtil.parseItems(e,i,r,a);else{o=HierarchicalUtil.convertFlatData(e,i,r);n=HierarchicalUtil.parseItems(o,"value",r,"items")}}return n};HierarchicalUtil.parseGroupCV=function(t,e){for(var i=[],r=0,a=t.groups.length;r<a;r++){var o=this.parseGroups(t.groups[r],e);i.push(o)}return i};HierarchicalUtil.parseGroups=function(e,i){var r={};r.name=e.name;r.nameField=e.groupDescription.propertyName;r.item=e.items;if(e.groups&&e.groups.length){r.items=[];for(var a=0,o=e.groups.length;a<o;a++){var n=this.parseGroups(e.groups[a],i);r.items.push(n)}}else e.isBottomLevel&&(r.value=e.getAggregate(t.Aggregate.Sum,i));return r};HierarchicalUtil.parseItems=function(t,e,i,r){var a,o=[],n=t.length;for(a=0;a<n;a++)o.push(HierarchicalUtil.parseItem(t[a],e,i,r));return o};HierarchicalUtil.isFlatItem=function(e,i){return!t.isArray(e[i])};HierarchicalUtil.convertFlatData=function(e,i,r){var a,o,n=[],l={},s=e.length;for(a=0;a<s;a++){o=e[a];HierarchicalUtil.convertFlatItem(l,o,i,t.isArray(r)?r:[r])}HierarchicalUtil.convertFlatToHierarchical(n,l);return n};HierarchicalUtil.convertFlatToHierarchical=function(t,e){var i=e.flatDataOrder;i&&i.forEach((function(i){var r,a={},o=e[i];a[e.field]=i;if(o.flatDataOrder){r=[];HierarchicalUtil.convertFlatToHierarchical(r,o);a.items=r}else a.value=o;t.push(a)}))};HierarchicalUtil.convertFlatItem=function(e,i,r,a){var o,n,l,s;n=(o=a.slice()).shift();if(null==(l=null==(n=t.isString(n)?n.trim():n)?r:i[n]))return!1;if(0===o.length){e[l]=i[r]||0;e.flatDataOrder?e.flatDataOrder.push(l):e.flatDataOrder=[l];e.field=n}else{if(null==e[l]){e[l]={};e.flatDataOrder?e.flatDataOrder.push(l):e.flatDataOrder=[l];e.field=n}s=e[l];HierarchicalUtil.convertFlatItem(s,i,r,o)||(e[l]=i[r])}return!0};HierarchicalUtil.parseItem=function(e,i,r,a){var o,n,l,s,h,c={};if(t.isArray(a))s=(h=a.slice()).length?h.shift().trim():"";else{h=a;s=a}if(t.isArray(r)){n=null==(n=(o=r.slice()).shift())?n:n.trim();c.nameField=null==n?i:n;c.name=null==n?e[i]:e[n];l=e[s];0===o.length?c.value=e[i]:l&&t.isArray(l)&&l.length>0?c.items=HierarchicalUtil.parseItems(l,i,o,h):c.value=e[i]||0}else{c.nameField=null==r?i:r;c.name=null==r?e[i]:e[r];null!=(l=e[s])&&t.isArray(l)&&l.length>0?c.items=HierarchicalUtil.parseItems(l,i,r,h):c.value=e[i]}c.item=e;return c};HierarchicalUtil.parseFlatItem=function(t,e,i,r){t.items||(t.items=[])};return HierarchicalUtil}();e.HierarchicalUtil=i}(e.hierarchical||(e.hierarchical={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i;!function(t){t[t.Squarified=0]="Squarified";t[t.Horizontal=1]="Horizontal";t[t.Vertical=2]="Vertical"}(i=e.TreeMapType||(e.TreeMapType={}));var r=function(r){__extends(TreeMap,r);function TreeMap(e,i){var a=r.call(this,e,null,!0)||this;a._values=[];a._labels=[];a._areas=[];a._sum=0;a._keywords=new t.chart._KeyWords;a._processedData=[];a._depth=1;a._itemIndex=0;a._processedItem=[];a._maxDepth=-1;a._tmItems=[];a._colRowLens=[];a._defPalette=[{titleColor:"#033884",maxColor:"#1450a7",minColor:"#83b3f9"},{titleColor:"#a83100",maxColor:"#dc4a0d",minColor:"#ffb190"},{titleColor:"#006658",maxColor:"#008d7a",minColor:"#7deddf"},{titleColor:"#a10046",maxColor:"#df0061",minColor:"#ff8cbe"},{titleColor:"#784d08",maxColor:"#99681a",minColor:"#efc989"},{titleColor:"#54156f",maxColor:"#722a90",minColor:"#cf95e7"},{titleColor:"#998605",maxColor:"#c2ac19",minColor:"#ffef8b"},{titleColor:"#9a0005",maxColor:"#c80c14",minColor:"#ff888d"}];a.applyTemplate("wj-control wj-flexchart wj-treemap",null,null);a._currentRenderEngine=new t.chart._SvgRenderEngine(a.hostElement);a._legend=new t.chart.Legend(a);a._legend.position=t.chart.Position.None;a._tooltip=new t.chart.ChartTooltip;a._tooltip.content="<b>{name}</b><br/>{value}";a._tooltip.showDelay=0;a._lbl=new t.chart.DataLabel;a._lbl.position=t.chart.LabelPosition.Center;a._lbl._chart=a;a.hostElement.addEventListener("mousemove",(function(t){a.isTouching||a._toogleTooltip(t)}));a.hostElement.addEventListener("click",(function(e){var i=!0;if(a.maxDepth>0){var r=a.hitTest(e),o=t.chart.FlexChart._SELECTION_THRESHOLD;a.tooltip&&a.tooltip.threshold&&(o=a.tooltip.threshold);if(r.distance<=o&&r.pointIndex>=-1&&r.pointIndex<a._areas.length){var n=a._areas[r.pointIndex];if(a._currentItem!=n.item){a._currentItem=n.item;a._refreshChart();i=!1}}}i&&a.isTouching&&a._toogleTooltip(e)}));a.hostElement.addEventListener("contextmenu",(function(e){if(a.maxDepth>0){var i=a.hitTest(e),r=t.chart.FlexChart._SELECTION_THRESHOLD;a.tooltip&&a.tooltip.threshold&&(r=a.tooltip.threshold);i.distance<=r&&a._rollUp()}e.preventDefault();return!1}));a.hostElement.addEventListener("mouseleave",(function(){a._hideToolTip()}));a.deferUpdate((function(){return a.initialize(i)}));return a}TreeMap.prototype._rollUp=function(){this._currentItem=this._currentItem&&this._currentItem.parent?this._currentItem.parent:null;this._refreshChart()};TreeMap.prototype._toogleTooltip=function(e){var i=this._tooltip;if(i.content){var r=this.hitTest(e);if(r.distance<=i.threshold){var a=this._getLabelContent(r,this.tooltip.content);this._showToolTip(a,new t.Rect(e.clientX,e.clientY,5,5))}else this._hideToolTip()}};Object.defineProperty(TreeMap.prototype,"selectionMode",{get:function(){return t.chart.SelectionMode.None},set:function(t){},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"_treeMapItems",{get:function(){return this._tmItems},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"binding",{get:function(){return this._binding},set:function(e){if(e!=this._binding){this._binding=t.asString(e,!0);this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"type",{get:function(){return null==this._type?i.Squarified:this._type},set:function(e){if((e=t.asEnum(e,i))!=this._type){this._type=e;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"bindingName",{get:function(){return this._bindingName},set:function(e){if(e!=this._bindingName){t.assert(null==e||t.isArray(e)||t.isString(e),"bindingName should be an array or a string.");this._bindingName=e;this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){if(t!=this._lbl){this._lbl=t;this._lbl&&(this._lbl._chart=this)}},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(e){if(e!=this._childItemsPath){t.assert(null==e||t.isArray(e)||t.isString(e),"childItemsPath should be an array or a string.");this._childItemsPath=e;this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"maxDepth",{get:function(){return this._maxDepth},set:function(e){if(e!=this._maxDepth){this._maxDepth=t.asNumber(e,!0);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(TreeMap.prototype,"palette",{get:function(){return this._palette},set:function(e){if(e!=this._palette){this._palette=t.asArray(e);this._tmItems&&this._tmItems.length>0&&this._calculateColorForItems(this._tmItems);this.invalidate()}},enumerable:!0,configurable:!0});TreeMap.prototype._initData=function(){this._sum=0;this._tmItems=[];this._currentItem=null;this._values=[];this._labels=[];this._processedData=[];this._depth=1;this._processedItem=[]};TreeMap.prototype._performBind=function(){var t;this._initData();if(this._cv){t=this._cv.items;this._cv.groups&&this._cv.groups.length?this._processedData=e.HierarchicalUtil.parseDataToHierarchical(this._cv,this.binding,this.bindingName,this.childItemsPath):t&&(this._processedData=e.HierarchicalUtil.parseDataToHierarchical(t,this.binding,this.bindingName,this.childItemsPath));if(this._processedData&&this._processedData.length){this._sum=this._calculateValueAndDepth(this._processedData,1);this._sortData(this._processedData);this._values=[];this._getTMItemsAndLabelsAndValues(this._processedData,this._tmItems,1,null);this._calculateColorForItems(this._tmItems)}}};TreeMap.prototype._sortData=function(t){var e=this;t.forEach((function(t){t.items&&e._sortData(t.items)}));t.sort((function(t,e){return e.value-t.value}))};TreeMap.prototype._getTMItemsAndLabelsAndValues=function(t,e,i,r,o){var n=this;t&&t.length>0&&t.forEach((function(t,o){var l,s=new a;s.items=[];s.parent=r;s.depth=i;t.items&&n._getTMItemsAndLabelsAndValues(t.items,s.items,i+1,s);l=t.name?t.name:t.value.toString();s.label=l;s.value=t.value;if(null!=r){t.value>r.maxValue&&(r.maxValue=t.value);t.value<r.minValue&&(r.minValue=t.value)}e.push(s);n._labels.push(l);n._values.push(t.value)}))};TreeMap.prototype._calculateColorForItems=function(e,i,r){var a=this,n=r;e.forEach((function(e,r){var l=i;1===e.depth&&(l=a._getColor(r));e.palette=l;var s=e.palette;if(t.isString(s)){var h=s,c=a._getLightColor(h);e.titleFill=h;e.titleStroke=h;e.fill=c;e.stroke=h}else if(s.maxColor&&s.minColor&&s.titleColor){e.titleFill=s.titleColor;e.titleStroke=s.titleColor;if(null==e.parent){e.fill=s.maxColor;e.stroke=s.maxColor}else{null==n&&(n=new o(s.minColor,e.minValue,s.maxColor,e.maxValue));var u=n._calculateColorByVal(e.value,!0).toString();e.fill=u;e.stroke=u}}if(e.items&&e.items.length>0){var _=new o(s.minColor,e.minValue,s.maxColor,e.maxValue);a._calculateColorForItems(e.items,l,_)}}))};TreeMap.prototype._getBindData=function(e,i,r){var a,o=0;r&&(a=e[r]);o=0;t.isNumber(a)?o=t.asNumber(a):a&&(o=parseFloat(a.toString()));if(!isNaN(o)&&isFinite(o))i.push(o);else{o=0;i.push(o)}return o};TreeMap.prototype._calculateValueAndDepth=function(t,e){var i=this,r=0,a=this._values;this._depth<e&&(this._depth=e);t.forEach((function(t){var o;if(t.items){o=i._calculateValueAndDepth(t.items,e+1);t.value=o;a.push(o)}else{o=i._getBindData(t,a,"value");t.value=o}r+=o}));return r};TreeMap.prototype._prepareRender=function(){this._areas=[]};TreeMap.prototype._renderChart=function(e,i,r){var a,o,n,l=this._rectChart.clone();new t.Size(l.width,l.height);this.onRendering(new t.chart.RenderEventArgs(e));var s=i.width,h=i.height;this._tmGroup=e.startGroup(null,null,!0);var c=this._parseMargin(this.plotMargin);this.dataLabel;isNaN(c.left)&&(c.left=TreeMap._MARGIN);isNaN(c.right)&&(c.right=TreeMap._MARGIN);isNaN(c.top)&&(c.top=TreeMap._MARGIN);isNaN(c.bottom)&&(c.bottom=TreeMap._MARGIN);i.top+=c.top;h=i.height-(c.top+c.bottom);i.height=h>0?h:24;i.left+=c.left;s=i.width-(c.left+c.right);i.width=s>0?s:24;this._plotRect=i;a=this._currentItem?[this._currentItem]:this._tmItems;o=null==this._currentItem||this.maxDepth<1?this.maxDepth:this._currentItem&&this._currentItem.items&&this._currentItem.items.length&&this.maxDepth>1?this.maxDepth:this.maxDepth+1;n=this._currentItem?this._currentItem.value:this._sum;this._renderTreeMap(e,i,this._tmGroup,a,n,o);e.endGroup();this.dataLabel.content&&this.dataLabel.position!=t.chart.LabelPosition.None&&this._renderLabels(e);this.onRendered(new t.chart.RenderEventArgs(e))};TreeMap.prototype._renderTreeMap=function(t,e,i,r,a,o){if(a>0){this._itemIndex=0;this._resetItemRects(this._tmItems);this._calculateItemRects(e,r,a,1,o);this._renderHierarchicalTreeMapItems(t,i,e,this._tmItems,a,1,o)}};TreeMap.prototype._resetItemRects=function(e){var i=this;e.forEach((function(e){e.rect=new t.Rect(0,0,0,0);e.isTitle=!1;e.type=i.type;e.items&&e.items.length&&i._resetItemRects(e.items)}))};TreeMap.prototype._calculateItemRects=function(t,e,r,a,o){var l=this;switch(this.type){case i.Horizontal:n.horizontal(e,t,r);break;case i.Vertical:n.vertical(e,t,r);break;case i.Squarified:n.squarified(e,t,r)}e.forEach((function(t,e){t.rect.clone();if(t.items&&t.items.length)if(a===o);else if(a>o&&o>=1);else{t.isTitle=!0;l._calculateItemRects(t.itemsRect,t.items,t.value,a+1,o)}}))};TreeMap.prototype._renderHierarchicalTreeMapItems=function(e,i,r,a,o,n,l){var s,h,c,u,_,p=a.length;this.type;if(0!==p)for(var d=0;d<p;d++){s=e.startGroup(TreeMap._CSS_ITEMDEPTH+n);h=a[d];c=Math.abs(h.value);u=h.rect;h.draw(e);_=new t.chart._RectArea(u);h.items&&this._renderHierarchicalTreeMapItems(e,s,h.itemsRect,h.items,c,n+1,l);_.tag=this._itemIndex;_.name=h.label;_.value=c;_.item=h;this._areas.push(_);this._itemIndex++;e.endGroup()}};TreeMap.prototype._renderLabels=function(e){var i,r=this._areas.length,a=this.dataLabel,o=a.position,n=a.connectingLine,l=a.border,s=a.offset||0;e.stroke="null";e.fill="transparent";e.strokeWidth=1;e.startGroup("wj-data-labels");for(var h=0;h<r;h++){var c=this._areas[h];if(c){var u=c.rect,_=new t.chart.HitTestInfo(this,i);_._setData(null,h);var p=this._getLabelContent(_,a.content);i=new t.Point(u.left+u.width/2,u.top+u.height/2);if(p&&u.width>0&&u.height>0){var d=new t.chart.DataLabelRenderEventArgs(e,_,i,p);if(a.onRendering(d)){p=d.text;i=d.point;this._renderLabelAndBorder(e,c,u,p,o,s,i,n,2,l)}}}}e.endGroup()};TreeMap.prototype._renderLabelAndBorder=function(e,i,r,a,o,n,l,s,h,c){var u,_="wj-data-label",p="wj-data-label-line";switch(o){case t.chart.LabelPosition.Top:s&&e.drawLine(l.x,l.y,l.x,l.y-n,p);l.y-=h+n;u=this._renderText(e,i,r,a,l,1,2,_);break;case t.chart.LabelPosition.Bottom:s&&e.drawLine(l.x,l.y,l.x,l.y+n,p);l.y+=h+n;u=this._renderText(e,i,r,a,l,1,0,_);break;case t.chart.LabelPosition.Left:s&&e.drawLine(l.x,l.y,l.x-n,l.y,p);l.x-=h+n;u=this._renderText(e,i,r,a,l,2,1,_);break;case t.chart.LabelPosition.Right:s&&e.drawLine(l.x,l.y,l.x+n,l.y,p);l.x+=h+n;u=this._renderText(e,i,r,a,l,0,1,_);break;case t.chart.LabelPosition.Center:u=this._renderText(e,i,r,a,l,1,1,_)}c&&u&&e.drawRect(u.left-h,u.top-h,u.width+2*h,u.height+2*h,"wj-data-label-border");return u};TreeMap.prototype._renderText=function(e,r,a,o,n,l,s,h){var c,u=o,_=r.item;c=e.measureString(o,h);if(this.type===i.Horizontal&&_.isTitle){c.width>a.height&&(u=this._cutText(o,c.width,a.height));t.chart.FlexChart._renderRotatedText(e,u,n,l,s,n,-90,h);return null}c.width>a.width&&(u=this._cutText(o,c.width,a.width));return t.chart.FlexChart._renderText(e,u,n,l,s,h)};TreeMap.prototype._cutText=function(t,e,i){var r="",a=t.length,o=Math.floor((1-(e-i)/e)*a);t.length>0&&(r=t[0]+(o>1?t.substring(1,o-1)+"..":""));return r};TreeMap.prototype._measureLegendItem=function(e,i){var r=new t.Size;r.width=t.chart.Series._LEGEND_ITEM_WIDTH;r.height=t.chart.Series._LEGEND_ITEM_HEIGHT;if(i){var a=e.measureString(i,t.chart.FlexChart._CSS_LABEL,t.chart.FlexChart._CSS_LEGEND);r.width+=a.width;r.height<a.height&&(r.height=a.height)}r.width+=3*t.chart.Series._LEGEND_ITEM_MARGIN;r.height+=2*t.chart.Series._LEGEND_ITEM_MARGIN;return r};TreeMap.prototype._getDesiredLegendSize=function(e,i,r,a){var o=new t.Size,n=(new t.Size(r,a),this._tmItems.length),l=0,s=0;this._colRowLens=[];for(var h=0;h<n;h++){var c=this._measureLegendItem(e,this._tmItems[h].label);if(i){if(s+c.height>a){o.height=a;this._colRowLens.push(l);l=0;s=0}l<c.width&&(l=c.width);s+=c.height}else{if(l+c.width>r){o.width=r;this._colRowLens.push(s);s=0;l=0}s<c.height&&(s=c.height);l+=c.width}}if(i){o.height<s&&(o.height=s);this._colRowLens.push(l);o.width=this._colRowLens.reduce((function(t,e){return t+e}),0);o.width=this._getLegendSize(r,o.width)}else{o.width<l&&(o.width=l);this._colRowLens.push(s);o.height=this._colRowLens.reduce((function(t,e){return t+e}),0);o.height=this._getLegendSize(a,o.height)}return o};TreeMap.prototype._renderLegend=function(e,i,r,a,o,n){for(var l,s=this._rectLegend,h=this._tmItems.length,c=0,u=i.clone(),_=0;_<h;_++){l=this._tmItems[_].label;var p=this._measureLegendItem(e,l);if(a){if(u.y+p.height>s.top+s.height+1){u.x+=this._colRowLens[c];c++;u.y=i.y}}else if(u.x+p.width>s.left+s.width+1){u.y+=this._colRowLens[c];c++;u.x=i.x}var d=new t.Rect(u.x,u.y,p.width,p.height);this._drawLegendItem(e,d,_,l);r.push(d);a?u.y+=p.height:u.x+=p.width}};TreeMap.prototype._drawLegendItem=function(e,i,r,a){e.strokeWidth=1;var o=t.chart.Series._LEGEND_ITEM_MARGIN,n=this._getColor(r),l=n&&n.maxColor?n.maxColor:n,s=this._getLightColor(l);e.fill=l;e.stroke=s;var h=i.top+.5*i.height,c=t.chart.Series._LEGEND_ITEM_WIDTH,u=t.chart.Series._LEGEND_ITEM_HEIGHT;e.drawRect(i.left+o,h-.5*u,c,u,null);a&&t.chart.FlexChart._renderText(e,a,new t.Point(i.left+u+2*o,h),0,1,t.chart.FlexChart._CSS_LABEL)};TreeMap.prototype._getLabelContent=function(e,i){return t.isString(i)?this._keywords.replace(i,e):t.isFunction(i)?i(e):null};TreeMap.prototype.hitTest=function(e,i){var r=this._toControl(e,i),a=new t.chart.HitTestInfo(this,r),o=null;if(t.chart.FlexChart._contains(this._rectHeader,r))a._chartElement=t.chart.ChartElement.Header;else if(t.chart.FlexChart._contains(this._rectFooter,r))a._chartElement=t.chart.ChartElement.Footer;else if(t.chart.FlexChart._contains(this._rectLegend,r)){a._chartElement=t.chart.ChartElement.Legend;null!==(o=this.legend._hitTest(r))&&o>=0&&o<this._areas.length&&a._setData(null,o)}else if(t.chart.FlexChart._contains(this._rectChart,r)){for(var n,l=this._areas.length,s=NaN,h=0;h<l;h++){var c=r.clone(),u=this._areas[h];if(u.contains(c)){a._setData(null,u.tag);a._dist=0}var _=u.distance(c);if(void 0!==_&&(isNaN(s)||_<s)){s=_;n=u}}if(0!==a._dist&&null!=n){a._setData(null,n.tag);a._dist=s}a._chartElement=t.chart.ChartElement.ChartArea}else a._chartElement=t.chart.ChartElement.None;return a};TreeMap.prototype._getHitTestItem=function(t){var e=null,i=null;(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(i=e[t]);return i};TreeMap.prototype._getHitTestValue=function(t){return this._values[t]};TreeMap.prototype._getHitTestLabel=function(t){return this._labels[t]};TreeMap._CSS_ITEMDEPTH="wj-treemap-item-depth";TreeMap._MARGIN=0;return TreeMap}(t.chart.FlexChartBase);e.TreeMap=r;var a=function(){function _TreeMapItem(){this.items=[];this.maxValue=Number.MIN_VALUE;this.minValue=Number.MAX_VALUE}_TreeMapItem.prototype.draw=function(t){var e=this.rect;t.strokeWidth=0;if(this.isTitle){t.fill=this.titleFill;t.stroke=this.titleStroke}else{t.fill=this.fill;t.stroke=this.stroke}t.drawRect(e.left,e.top,e.width,e.height,_TreeMapItem._CLASSNAME)};Object.defineProperty(_TreeMapItem.prototype,"itemsRect",{get:function(){var e=this.rect,r=this._rect,a=1===this.depth?2:.5;return this.isTitle?this.type===i.Horizontal?new t.Rect(e.left+e.width+1,e.top,r.width-e.width-2*a,e.height+1):new t.Rect(e.left,e.top+e.height+1,e.width+1,r.height-e.height-2*a):new t.Rect(0,0,0,0)},enumerable:!0,configurable:!0});Object.defineProperty(_TreeMapItem.prototype,"rect",{get:function(){var e=this._rect,r=1===this.depth?2:.5,a=e.width,o=e.height,n=e.left,l=e.top;if(this.isTitle){if(this.type===i.Horizontal){a=e.width>20?20:a;a=Math.max(20,a-2*r);o=o>2*r?o-2*r:0}else{o=e.height>20?20:o;o=Math.max(20,o-2*r);a=a>2*r?a-2*r:0}n+=r;l+=r}else{a=a>2*r?a-2*r:0;o=o>2*r?o-2*r:0}return new t.Rect(n,l,a,o)},set:function(t){t!=this._rect&&(this._rect=t)},enumerable:!0,configurable:!0});Object.defineProperty(_TreeMapItem.prototype,"isTitle",{get:function(){return this._isTitle},set:function(e){var i=t.asBoolean(e,!0);i!==this._isTitle&&(this._isTitle=i)},enumerable:!0,configurable:!0});_TreeMapItem._CLASSNAME="wj-treemap-item";return _TreeMapItem}(),o=function(){function _ColorConverter(e,i,r,a,o,n){this.minColor=new t.Color(e);this.minColorValue=i;this.maxColor=new t.Color(r);this.maxColorValue=a;this.midColorValue=this.originalMidColorValue=n;this._calculateMidColorValue();this.midColor=this.originalMidColor=new t.Color(o);this._calculateMidColor()}_ColorConverter.prototype._resetminColor=function(e){this.minColor=new t.Color(e);this._calculateMidColor()};_ColorConverter.prototype._resetmidColor=function(e){this.midColor=this.originalMidColor=new t.Color(e);this._calculateMidColor()};_ColorConverter.prototype._resetmaxColor=function(e){this.maxColor=new t.Color(e);this._calculateMidColor()};_ColorConverter.prototype._resetminColorValue=function(t){this.minColorValue=t;this._calculateMidColorValue()};_ColorConverter.prototype._resetmidColorValue=function(t){this.midColorValue=this.originalMidColorValue=t;this._calculateMidColorValue()};_ColorConverter.prototype._resetmaxColorValue=function(t){this.maxColorValue=t;this._calculateMidColorValue()};_ColorConverter.prototype._calculateMidColorValue=function(){null==this.originalMidColorValue&&(this.midColorValue=(this.maxColorValue+this.minColorValue)/2)};_ColorConverter.prototype._calculateMidColor=function(){null==this.originalMidColor&&(this.midColor=this._calculateColorByVal(this.midColorValue,!0))};_ColorConverter.prototype._calculateColorByVal=function(e,i){void 0===i&&(i=!1);var r=this.maxColor,a=this.minColor,o=this.maxColorValue,n=this.minColorValue;if(e>=this.maxColorValue)return new t.Color(r.toString());if(e<=this.minColorValue)return new t.Color(a.toString());if(!i){if(e===this.midColorValue)return new t.Color(this.midColor.toString());if(e<this.midColorValue){r=this.midColor;o=this.midColorValue}else{a=this.midColor;n=this.midColorValue}}return this._getColor(e,r,o,a,n)};_ColorConverter.prototype._getColor=function(e,i,r,a,o){return t.Color.fromRgba(this._getValueByRatio(e,i.r,r,a.r,o),this._getValueByRatio(e,i.g,r,a.g,o),this._getValueByRatio(e,i.b,r,a.b,o),this._getValueByRatio(e,i.a,r,a.a,o))};_ColorConverter.prototype._getValueByRatio=function(t,e,i,r,a){return Math.abs(r+Math.round((t-a)*(e-r)/(i-a)))};return _ColorConverter}(),n=function(){function _TreeMapUtils(){}_TreeMapUtils.squarified=function(t,e,i){var r=t.slice(),a=e.clone(),o=a.width*a.height/i;do{var n=_TreeMapUtils.getRowedItems(r,a,o);_TreeMapUtils.layoutRowedItems(e,n,a,a.width>a.height)}while(r.length)};_TreeMapUtils.horizontal=function(t,e,i){var r=e.clone();t.forEach((function(t){var a=[{item:t,val:t.value*e.width*e.height/i}];_TreeMapUtils.layoutRowedItems(e,a,r,!1)}))};_TreeMapUtils.vertical=function(t,e,i){var r=e.clone();t.forEach((function(t){var a=[{item:t,val:t.value*e.width*e.height/i}];_TreeMapUtils.layoutRowedItems(e,a,r,!0)}))};_TreeMapUtils.getNarrowLen=function(t){return Math.min(t.width,t.height)};_TreeMapUtils.getRowedItem=function(t,e,i){return{item:t,val:i*t.value}};_TreeMapUtils.getRowedItems=function(t,e,i){var r=t.shift(),a=[],o=[],n=_TreeMapUtils.getNarrowLen(e),l=_TreeMapUtils.getRowedItem(r,e,i);a.push(l);o.push(l);if(t.length>0)do{o.push(_TreeMapUtils.getRowedItem(t[0],e,i));if(!(_TreeMapUtils.worst(a,n)>_TreeMapUtils.worst(o,n)))break;a=o.slice();t.shift()}while(t.length);return a};_TreeMapUtils.layoutRowedItems=function(e,i,r,a){var o,n=r.left,l=r.top,s=n+r.width,h=l+r.height,c=_TreeMapUtils.sumRowedArray(i);if(a){o=0===r.height?0:c/r.height;n+o>=s&&(o=s-n);i.forEach((function(e,r){var a=0===o?0:e.val/o;(l+a>h||r===i.length-1)&&(a=h-l);var s=new t.Rect(n,l,o,a);e.item.rect=s;l+=a}));r.left+=o;r.width-=o}else{o=0===r.width?0:c/r.width;l+o>=h&&(o=h-l);i.forEach((function(e,r){var a=0===o?0:e.val/o;(n+a>s||r===i.length-1)&&(a=s-n);var h=new t.Rect(n,l,a,o);e.item.rect=h;n+=a}));r.top+=o;r.height-=o}};_TreeMapUtils.sumRowedArray=function(t){for(var e=0,i=t.length,r=0;r<i;r++)e+=t[r].val;return e};_TreeMapUtils.worst=function(t,e){var i,r,a=_TreeMapUtils.sumRowedArray(t),o=a*a,n=e*e;i=r=t[0].val;t.forEach((function(t,e){t.val>i?i=t.val:t.val<r&&(r=t.val)}));return Math.max(n*i/o,o/(n*r))};return _TreeMapUtils}()}(e.hierarchical||(e.hierarchical={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(i){__extends(Sunburst,i);function Sunburst(t,e){var r=i.call(this,t,e)||this;r._selectionIndex=0;r.applyTemplate("wj-sunburst",null,null);r.initialize(e);r.refresh();return r}Object.defineProperty(Sunburst.prototype,"bindingName",{get:function(){return this._bindName},set:function(e){if(e!=this._bindName){t.assert(null==e||t.isArray(e)||t.isString(e),"bindingName should be an array or a string.");this._bindName=e;this._bindChart()}},enumerable:!0,configurable:!0});Object.defineProperty(Sunburst.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(e){if(e!=this._childItemsPath){t.assert(null==e||t.isArray(e)||t.isString(e),"childItemsPath should be an array or a string.");this._childItemsPath=e;this._bindChart()}},enumerable:!0,configurable:!0});Sunburst.prototype._initData=function(){i.prototype._initData.call(this);this._processedData=[];this._level=1;this._legendLabels=[];this._processedItem=[];this._values[0]=[]};Sunburst.prototype._performBind=function(){var t,i=this;this._initData();if(this._cv){t=this._cv.items;this._cv.groups&&this._cv.groups.length?this._processedData=e.HierarchicalUtil.parseDataToHierarchical(this._cv,this.binding,this.bindingName,this.childItemsPath):t&&(this._processedData=e.HierarchicalUtil.parseDataToHierarchical(t,this.binding,this.bindingName,this.childItemsPath));if(this._processedData&&this._processedData.length){this._sums[0]=this._sum=this._calculateValueAndLevel(this._processedData,1);this._processedData.forEach((function(t){i._legendLabels.push(t.name)}))}}};Sunburst.prototype._calculateValueAndLevel=function(t,e){var i=this,r=0,a=this._values[0],o=this._labels;this._level<e&&(this._level=e);t.forEach((function(t){var n;if(t.items){n=i._calculateValueAndLevel(t.items,e+1);t.value=n;a.push(n);o.push(t.name)}else{n=i._getBindData(t,a,o,"value","name");t.value=n}r+=n}));return r};Sunburst.prototype._renderPie=function(t,e,i,r,a,o){var n=this._getCenter();this._sliceIndex=0;this._parentRef={};this._renderHierarchicalSlices(t,n.x,n.y,this._processedData,this._sum,i,r,a,2*Math.PI,o,1)};Sunburst.prototype._renderHierarchicalSlices=function(t,e,i,r,a,o,n,l,s,h,c){var u,_,p,d,m,f,g,v,C,b,T=r.length,y=l,w=1==this.reversed;p=(o-n)/this._level;u=o-(this._level-c)*p;_=n+(c-1)*p;for(var I=0;I<T;I++){v=e;C=i;g=t.startGroup("wj-slice slice-level"+c);if(1===c){t.fill=this._getColorLight(I);t.stroke=this._getColor(I)}m=r[I];f=Math.abs(m.value);d=Math.abs(f-a)<1e-10?s:s*f/a;b=w?y-.5*d:y+.5*d;if(h>0&&d<s){v+=h*Math.cos(b);C+=h*Math.sin(b)}if(m.items){var M=this._sliceIndex;this._renderHierarchicalSlices(t,v,C,m.items,f,o,n,y,d,0,c+1);for(;M<this._sliceIndex;M++)null==this._parentRef[M]&&(this._parentRef[M]=this._sliceIndex)}this._renderSlice(t,v,C,b,0,this._sliceIndex,u,_,y,d,s);this._processedItem.push(m.item);this._sliceIndex++;w?y-=d:y+=d;t.endGroup();this._pels.push(g)}};Sunburst.prototype._getLabelsForLegend=function(){return this._legendLabels||[]};Sunburst.prototype._highlightCurrent=function(){this.selectionMode!=t.chart.SelectionMode.None&&this._highlight(!0,this._selectionIndex)};Sunburst.prototype.hitTest=function(e,r){var a=i.prototype.hitTest.call(this,e,r),o=this._toControl(e,r);if(t.chart.FlexChartBase._contains(this._rectChart,o)){var n=a.pointIndex,l=this._processedItem[n],s=new t.chart._DataPoint(null,n,null,null);s.item=l;a._setDataPoint(s)}return a};Sunburst.prototype._getSelectedItemOffset=function(t,e){var i=0,r=0,a=0;if(this.selectedItemOffset>0)if(t==this.selectedIndex)a=this.selectedItemOffset;else{var o=this._getSelectedParentIndex(t);if(null!=o){var n=this._areas[o];this.dataLabel.position;a=this.selectedItemOffset;e=((e=n.langle+this._rotationAngles[0])%360+360)%360;e*=Math.PI/180}}if(a>0){i=Math.cos(e)*a*this._radius;r=Math.sin(e)*a*this._radius}return{x:i,y:r}};Sunburst.prototype._getSelectedParentIndex=function(t){var e=this._parentRef[t];return null!=e?e===this.selectedIndex?e:this._getSelectedParentIndex(e):null};return Sunburst}(t.chart.FlexPie);e.Sunburst=i}(e.hierarchical||(e.hierarchical={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){e.hierarchical||(e.hierarchical={}),t._registerModule("wijmo.chart.hierarchical",t.chart.hierarchical)}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));
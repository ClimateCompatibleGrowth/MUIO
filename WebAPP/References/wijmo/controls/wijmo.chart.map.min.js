/*!
    *
    * Wijmo Library 5.20213.824
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}();!function(t){!function(t){!function(t){"use strict";var e=function(){function MapHitTestInfo(){}Object.defineProperty(MapHitTestInfo.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"geoPoint",{get:function(){return this._map?this._map.convertBack(this.point):null},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0});Object.defineProperty(MapHitTestInfo.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0});return MapHitTestInfo}();t.MapHitTestInfo=e}(t.map||(t.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function i(){};e._DrawOptions=i;var n=function(e){__extends(_SvgMapRenderEngine,e);function _SvgMapRenderEngine(t){var i=e.call(this,t)||this;i.scale=1;i.element.setAttribute("xmlns:wj-map","http://www.grapecity.com/wijmo");return i}_SvgMapRenderEngine.prototype.drawPolygon2=function(e,i){var n=e?e.className:null,r=e?e.clipPath:null,o=e?e.style:null,a=this.precision;if(i&&i.length>0){var s=document.createElementNS("http://www.w3.org/2000/svg","path");this._applyColor(s,"stroke",this.stroke);var h=this.strokeWidth;if(null!==h){t.isIE()&&(h*=this.scale);this._setAttribute(s,"stroke-width",h.toString())}this._applyColor(s,"fill",this.fill);for(var c="",l=0;l<i.length;l++){var u=i[l],p=u.length/2;if(p>1){c+=" M "+u[0].toFixed(a)+" "+u[1].toFixed(a);for(var f=1;f<p;f++)c+=" L "+u[2*f].toFixed(a)+" "+u[2*f+1].toFixed(a);c+=" Z"}}this._setAttribute(s,"d",c);n&&s.setAttribute("class",n);r&&this._setClipPath(s,r);this._applyStyle(s,o);this._appendChild(s);s.setAttribute("vector-effect","non-scaling-stroke");return s}return null};return _SvgMapRenderEngine}(t.chart.SvgRenderEngine);e._SvgMapRenderEngine=n}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(){function _Range(t,e){this.min=t;this.max=e}Object.defineProperty(_Range.prototype,"range",{get:function(){return this.max-this.min},enumerable:!0,configurable:!0});_Range.prototype.norm=function(t){return(t-this.min)/this.range};return _Range}();e._Range=i;var n=function(){function _Utils(){}_Utils.getRange=function(e,n){if(e&&n){for(var r=e.length,o=NaN,a=NaN,s=0;s<r;s++){var h=e[s];if(h){var c=void 0;c=t.isFunction(n)?n(h):n.getValue(h);t.isString(c)&&(c=parseFloat(c));if(isFinite(c)){(isNaN(o)||c<o)&&(o=c);(isNaN(a)||c>a)&&(a=c)}}}if(!isNaN(o)&&!isNaN(a))return new i(o,a)}return null};return _Utils}();e._Utils=n}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(){function ColorScale(e){this._clrs=[];this._clrUnknown="transparent";this.colors=t.chart.Palettes.SequentialSingle.Greys;this.initialize(e)}ColorScale.prototype.initialize=function(e){t.copy(this,e)};ColorScale.prototype.convert=function(t,e){void 0===e&&(e=!0);if(!isFinite(t)||0==this._clrs.length)return this.colorUnknown;this._range&&e&&(t=this._range.norm(t));this.scale&&(t=this.scale(t));return 2==this._clrs.length?this._interpolate(this._clrs[0],this._clrs[1],t):this._clrSpline.interpolate(t).toString()};Object.defineProperty(ColorScale.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t)},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"binding",{get:function(){return this._binding},set:function(t){this._binding!=t&&(this._binding=t)},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"colorUnknown",{get:function(){return this._clrUnknown},set:function(e){this._clrUnknown!=e&&(this._clrUnknown=t.asString(e))},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"colors",{get:function(){return this._colors},set:function(e){if(this._colors!=e){this._clrs=[];var i=this._colors=e;if(i){for(var n=0;n<i.length;n++)this._clrs.push(new t.Color(i[n]));this._clrSpline=new r(this._clrs)}}},enumerable:!0,configurable:!0});Object.defineProperty(ColorScale.prototype,"format",{get:function(){return this._fmt},set:function(e){this._fmt!=e&&(this._fmt=t.asString(e,!0))},enumerable:!0,configurable:!0});ColorScale.prototype.domain=function(i){t.isFunction(this.binding)?this._range=e._Utils.getRange(i,this.binding):this._range=e._Utils.getRange(i,new t.Binding(this.binding))};ColorScale.prototype.getValue=function(e){return t.isFunction(this.binding)?this.binding(e):new t.Binding(this.binding).getValue(e)};ColorScale.prototype._interpolate=function(e,i,n){var r=1-(n=t.clamp(n,0,1));return t.Color.fromRgba(e.r*r+i.r*n,e.g*r+i.g*n,e.b*r+i.b*n,e.a*r+i.a*n).toString()};ColorScale.prototype._drawLegend=function(t,e,i){n.draw(t,this,e,i)};ColorScale.prototype._measureLegend=function(t,e,i,r){return n.measure(t,this,e,i,r)};return ColorScale}();e.ColorScale=i;var n=function(){function _ColorScaleLegend(){}_ColorScaleLegend.measure=function(e,i,n,r,o){var a=n?new t.Size(this.itemSize,o-120):new t.Size(r-80,this.itemSize),s=this._getValues(i),h=s.length;if(s.length){for(var c=new t.Size,l=0;l<h;l++){var u=this._getLabel(i,s[l]),p=e.measureString(u);c.width=Math.max(c.width,p.width);c.height=Math.max(c.height,p.height)}c.width&&c.height&&(n?a.width+=c.width+this.marginText:a.height+=c.height+this.marginText)}return a};_ColorScaleLegend.draw=function(e,i,n,r){e.stroke="transparent";var o=this._getValues(i);if(r){for(var a=(n=n.inflate(0,-10)).height/100,s=0;s<100;s++){e.fill=i.convert((s+.5)/100,!1);e.drawRect(n.left,n.top+s*a,this.itemSize,a+1)}if(o.length){e.stroke="black";for(s=0;s<o.length;s++){var h=o[s],c=i._range.norm(h),l=n.top+c*n.height,u=this._getLabel(i,h),p=e.measureString(u);e.drawString(u,new t.Point(n.left+this.itemSize+this.marginText,l+.5*p.height));e.drawLine(n.left,l,n.left+this.itemSize,l)}}}else{var f=(n=n.inflate(-20,0)).width/100;a=0;if(o.length)for(s=0;s<o.length;s++){h=o[s],c=i._range.norm(h);i.scale&&(c=i.scale(c));var _=n.left+c*n.width;u=this._getLabel(i,h),p=e.measureString(u);a=Math.max(a,p.height);e.drawString(this._getLabel(i,h),new t.Point(_-.5*p.width,n.top+p.height))}a&&(a+=this.marginText);for(s=0;s<100;s++){e.fill=i.convert((s+.5)/100,!1);e.drawRect(n.left+s*f,n.top+a,f+1,this.itemSize)}if(o.length){e.stroke="black";for(s=0;s<o.length;s++){h=o[s],c=i._range.norm(h);i.scale&&(c=i.scale(c));_=n.left+c*n.width;e.drawLine(_,n.bottom-this.itemSize,_,n.bottom)}}}};_ColorScaleLegend._getValues=function(t){var e=[],i=t._range;if(i)for(var n=this._calcDelta(i.range),r=Math.round(i.min/n)*n;r<=i.max;r+=n)r<i.min||e.push(r);return e};_ColorScaleLegend._getLabel=function(e,i){return e.format?t.Globalize.formatNumber(i,e.format):i.toString()};_ColorScaleLegend._calcDelta=function(t){var e=this._nicePrecision(t),i=t/10,n=this._niceNumber(2*i,-e,!0);n<i&&(n=this._niceNumber(i,1-e,!1));n<i&&(n=this._niceTickNumber(i));return n};_ColorScaleLegend._nicePrecision=function(e){if(!t.isNumber(e)||e<=0)return 0;var i,n=Math.log(e)/Math.LN10;i=n>=0?Math.floor(n):Math.ceil(n);var r=e/Math.pow(10,i);if(r<3){i=1-i;(r=e/Math.pow(10,i))<3&&(i+=1)}return i};_ColorScaleLegend._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),n=t/Math.pow(10,i),r=10;n<=1?r=1:n<=2?r=2:n<=5&&(r=5);return r*Math.pow(10,i)};_ColorScaleLegend._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var n=t/Math.pow(10,e),r=10;i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5);return r*Math.pow(10,e)};_ColorScaleLegend.itemSize=20;_ColorScaleLegend.marginText=4;return _ColorScaleLegend}(),r=function(){function _ColorSpline(t){this._clrs=t;for(var e=t.length,i=[],n=[],r=[],a=[],s=0;s<e;s++){var h=t[s],c=s/(e-1);i.push(c);n.push(h.r);r.push(h.g);a.push(h.b)}this._rsp=new o(i,n);this._gsp=new o(i,r);this._bsp=new o(i,a)}_ColorSpline.prototype.interpolate=function(e){e=t.clamp(e,0,1);var i=this._rsp.calculate(e),n=this._gsp.calculate(e),r=this._bsp.calculate(e);return t.Color.fromRgba(i,n,r)};return _ColorSpline}(),o=function(){function _Spline(e,i,n){this.k=.002;this._a=[];this._b=[];this._c=[];this._d=[];this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]];this._x=e;this._y=i;var r=this._len=n||Math.min(e.length,i.length);if(r>3)for(var o=0;o<r-1;o++){var a=0==o?new t.Point(e[o],i[o]):new t.Point(e[o-1],i[o-1]),s=new t.Point(e[o],i[o]),h=new t.Point(e[o+1],i[o+1]),c=o==r-2?new t.Point(e[o+1],i[o+1]):new t.Point(e[o+2],i[o+2]),l=new t.Point,u=new t.Point,p=new t.Point,f=new t.Point;l.x=a.x*this.m[0][0]+s.x*this.m[0][1]+h.x*this.m[0][2]+c.x*this.m[0][3];u.x=a.x*this.m[1][0]+s.x*this.m[1][1]+h.x*this.m[1][2]+c.x*this.m[1][3];p.x=a.x*this.m[2][0]+s.x*this.m[2][1]+h.x*this.m[2][2]+c.x*this.m[2][3];f.x=a.x*this.m[3][0]+s.x*this.m[3][1]+h.x*this.m[3][2]+c.x*this.m[3][3];l.y=a.y*this.m[0][0]+s.y*this.m[0][1]+h.y*this.m[0][2]+c.y*this.m[0][3];u.y=a.y*this.m[1][0]+s.y*this.m[1][1]+h.y*this.m[1][2]+c.y*this.m[1][3];p.y=a.y*this.m[2][0]+s.y*this.m[2][1]+h.y*this.m[2][2]+c.y*this.m[2][3];f.y=a.y*this.m[3][0]+s.y*this.m[3][1]+h.y*this.m[3][2]+c.y*this.m[3][3];this._a.push(l);this._b.push(u);this._c.push(p);this._d.push(f)}}_Spline.prototype.calculate=function(t){t*=this._len-1;var e=Math.floor(t);e<0&&(e=0);e>this._len-2&&(e=this._len-2);var i=t-e;this._a[e].x,this._b[e].x,this._c[e].x,this._d[e].x;return((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y};return _Spline}()}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(i){__extends(FlexMap,i);function FlexMap(r,o){var a=i.call(this,r,null,!0)||this;a._layers=new t.collections.ObservableArray;a._center=new t.Point;a._zoom=1;a._zoomStep=.5;a._offset=new t.Point;a._proj=new n;a._touchStartH=a._touchStart.bind(a);a._touchMoveH=a._touchMove.bind(a);a._touchEndH=a._touchEnd.bind(a);a._touchCancelH=a._touchCancel.bind(a);a._mouseWheelH=a._mouseWheel.bind(a);a._handleTouch=!1;var s=a.hostElement;a.applyTemplate("wj-control wj-flexchart wj-flexmap",null,null);a._currentRenderEngine=new e._SvgMapRenderEngine(s);var h=t.createElement("<div></div>",null,{position:"relative"});a._overlay=t.createElement("<div></div>",h,{position:"absolute",left:"90%",bottom:"90%"});t.createElement('<button class="wj-btn"><span class="wj-glyph-plus"></span></button>',a._overlay).addEventListener("click",(function(){return a.zoom+=a._zoomStep}));t.createElement('<button class="wj-btn"><span class="wj-glyph-minus"></span></button>',a._overlay).addEventListener("click",(function(){return a.zoom-=a._zoomStep}));t.addClass(s,"wj-flexchart-touch-disabled");s.appendChild(h);a._legend=new t.chart.Legend(a);a._legend.position=t.chart.Position.None;a._tooltip=new t.chart.ChartTooltip;a.tooltip.content=null;var c=a;a.layers.collectionChanged.addHandler((function(){a.layers.forEach((function(t){return t.map=c}));a.invalidate()}));a.addEventListener(s,"click",(function(t){if(!c.isDisabled){var e=c._tooltip;e.content&&c.isTouching&&c._updateTooltip(e,t)}}));a.addEventListener(s,"mousedown",(function(e){if(!c.isDisabled&&0==e.button){a.focus();a._dragStart=new t.Point(e.pageX,e.pageY);a._hideToolTip()}}));a.addEventListener(s,"mousemove",(function(e){if(!c.isDisabled)if(c._dragStart){var i=a.convertBack(a._toControl(c._dragStart)),n=a.convertBack(a._toControl(e));a.center=new t.Point(a.center.x-n.x+i.x,a.center.y-n.y+i.y);a._dragStart=new t.Point(e.pageX,e.pageY)}else{var r=c._tooltip;r.content&&!c.isTouching&&c._updateTooltip(r,e)}}));a.addEventListener(s,"mouseup",(function(t){a._dragStart=null}));a.addEventListener(s,"mouseleave",(function(t){if(t.target==c.hostElement){a._dragStart=null;c._hideToolTip()}}));a.addEventListener(s,"touchstart",a._touchStartH);a.addEventListener(s,"touchmove",a._touchMoveH);a.addEventListener(s,"touchcancel",a._touchCancelH);a.addEventListener(s,"touchend",a._touchEndH);a.addEventListener(s,"wheel",a._mouseWheelH);a.initialize(o);a.refresh();return a}Object.defineProperty(FlexMap.prototype,"layers",{get:function(){return this._layers},enumerable:!0,configurable:!0});Object.defineProperty(FlexMap.prototype,"center",{get:function(){return this._center},set:function(t){if(this._center!=t){this._center=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexMap.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t<1&&(t=1);if(this._zoom!=t){this._zoom=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexMap.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0});FlexMap.prototype.convert=function(t){return this._convertMercator(t)};FlexMap.prototype.convertBack=function(t){return this._convertMercatorBack(t)};FlexMap.prototype.hitTest=function(i,n){var r=this._toControl(i,n),o=new e.MapHitTestInfo;if(t.chart.FlexChartBase._contains(this._rectHeader,r))o._chartElement=t.chart.ChartElement.Header;else if(t.chart.FlexChartBase._contains(this._rectFooter,r))o._chartElement=t.chart.ChartElement.Footer;else if(t.chart.FlexChartBase._contains(this._rectLegend,r))o._chartElement=t.chart.ChartElement.Legend;else if(t.chart.FlexChartBase._contains(this._rectChart,r)){var a=void 0;if(i instanceof MouseEvent)a=document.elementFromPoint(i.x,i.y);else{var s=this._getHostOffset();a=document.elementFromPoint(s.x+r.x,s.y+r.y)}var h=a.getAttribute("wj-map:id");null!=h&&(o._item=this._getItemById(h))}return o};FlexMap.prototype.zoomTo=function(e){var i=this._proj.maxY,n=Math.max(e.top,-i),r=Math.min(e.bottom,i),o=this.convert(new t.Point(e.left,n)),a=this.convert(new t.Point(e.right,r));if(t.chart._DataInfo.isValid(o.x,o.y,a.x,a.y)){var s=new t.Point(.5*(o.x+a.x),.5*(o.y+a.y));this.center=this.convertBack(s);o=this.convert(new t.Point(e.left,n));a=this.convert(new t.Point(e.right,r));var h=this._mapRect.width/Math.abs(a.x-o.x),c=this._mapRect.height/Math.abs(a.y-o.y);this.zoom*=this.zoom+Math.log(Math.min(h,c))*Math.LOG2E}};FlexMap.prototype.invalidate=function(t){t&&this.layers.forEach((function(t){t._clearCache&&t._clearCache()}));i.prototype.invalidate.call(this,t)};FlexMap.prototype._renderChart=function(e,i,n){this.onRendering(new t.chart.RenderEventArgs(e));var r=i.width,o=i.height,a=this._parseMargin(this.plotMargin);isNaN(a.left)&&(a.left=8);isNaN(a.right)&&(a.right=8);isNaN(a.top)&&(a.top=8);isNaN(a.bottom)&&(a.bottom=8);i.top+=a.top;o=i.height-(a.top+a.bottom);i.height=o>0?o:24;i.left+=a.left;r=i.width-(a.left+a.right);i.width=r>0?r:24;var s="mapRect"+(1e6*Math.random()).toFixed();e.addClipRect(i,s);var h=e.startGroup(null,s,!0);this._mapRect=i.clone();var c=this._size=.5*Math.min(i.width,i.height);this._offset.x=this._mapRect.left;this._offset.y=this._mapRect.top;i.width>2*c?this._offset.x=.5*i.width-c+this._mapRect.left:i.height>2*this._size&&(this._offset.y=.5*i.height-c+this._mapRect.top);var l=Math.pow(2,this.zoom),u=this._proj.convert(this.center);u.x=u.x*l*c-c;u.y=u.y*l*c-c;this._offset.x-=u.x;this._offset.y-=u.y;e.precision=6;for(var p=0;p<this.layers.length;p++){var f=1/(l*c);e.scale=f;var _=e.element.createSVGTransform(),d=e.element.createSVGMatrix();d.a=d.d=l*c;d.b=d.c=0;d.e=this._offset.x;d.f=this._offset.y;_.setMatrix(d);this.layers[p].render(e,_,h)}e.endGroup();var g=this._rectChart.bottom-this._mapRect.bottom;this._overlay.style.left=(this._mapRect.right-80).toString()+"px";this._overlay.style.bottom=g.toString()+"px";this.onRendered(new t.chart.RenderEventArgs(e))};FlexMap.prototype._getDesiredLegendSize=function(e,i,n,r){for(var o=new t.Size,a=0;a<this.layers.length;a++){var s=this.layers[a];if(s.colorScale){s.getAllFeatures?s.colorScale.domain(s.getAllFeatures()):s.colorScale.domain(s.itemsSource);var h=s.colorScale._measureLegend(e,i,n,r);h&&h.width&&h.height&&(o=h)}}return o};FlexMap.prototype._renderLegend=function(e,i,n,r,o,a){var s=new t.Rect(i.x,i.y,o,a);this.layers.forEach((function(t){t.colorScale&&t.colorScale._drawLegend(e,s,r)}))};FlexMap.prototype._copy=function(e,i){if("layers"==e){this.layers.clear();for(var n=t.asArray(i),r=0;r<n.length;r++)this.layers.push(n[r]);return!0}return!1};FlexMap.prototype._updateTooltip=function(e,i){var n=e.content;if(n){var r=document.elementFromPoint(i.x,i.y),o=r?r.getAttribute("wj-map:id"):null;if(null!=o){var a=this._getItemById(o);if(a){t.isFunction(n)&&(n=n(a));n=t.format(n,a)}}else n=null}n&&n.trim().length>0?this._showToolTip(n,new t.Rect(i.clientX,i.clientY,5,5)):this._hideToolTip()};FlexMap.prototype._getItemById=function(t){for(var e=0;e<this.layers.length;e++){var i=this.layers[e];if(i._getFeatureById){if(n=i._getFeatureById(t))return n.properties}else if(i.getItemById){var n;if(n=i.getItemById(t))return n}}return null};FlexMap.prototype._convertMercator=function(t){var e=Math.pow(2,this.zoom)*this._size,i=this._proj.convert(t);i.x*=e;i.y*=e;i.x+=this._offset.x;i.y+=this._offset.y;return i};FlexMap.prototype._convertMercatorBack=function(t){var e=Math.pow(2,this.zoom)*this._size,i=this._proj,n=t.clone();n.x-=this._offset.x;n.y-=this._offset.y;n.x/=e;n.y/=e;return n=i.convertBack(n)};FlexMap.prototype._touchStart=function(e){if(!this.isDisabled){switch(e.touches.length){case 1:this._handleTouch=!0;this._dragStart=new t.Point(e.touches[0].pageX,e.touches[0].pageY);break;case 2:this._dragStart=null;this._handleTouch=!0;this._touch1=new t.Point(e.touches[0].pageX,e.touches[0].pageY);this._touch2=new t.Point(e.touches[1].pageX,e.touches[1].pageY)}this._handleTouch&&this._hideToolTip()}};FlexMap.prototype._touchMove=function(e){if(!this.isDisabled){this._handleTouch&&e.preventDefault();if(this._dragStart){var i=this.convertBack(this._toControl(this._dragStart)),n=this.convertBack(this._toControl(e.touches[0].pageX,e.touches[0].pageY));this.center=new t.Point(this.center.x-n.x+i.x,this.center.y-n.y+i.y);this._dragStart=new t.Point(e.touches[0].pageX,e.touches[0].pageY)}else if(this._touch1&&this._touch2){var r=new t.Point(e.touches[0].pageX,e.touches[0].pageY),o=new t.Point(e.touches[1].pageX,e.touches[1].pageY),a=this._dist(this._touch1,this._touch2),s=this._dist(r,o);if(Math.abs(s-a)>1){this.zoom+=Math.log2(s/a);this._touch1=r;this._touch2=o}}}};FlexMap.prototype._dist=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)};FlexMap.prototype._touchEnd=function(t){this._handleTouch=!1;this._dragStart=this._touch1=this._touch2=null};FlexMap.prototype._touchCancel=function(t){this._handleTouch=!1;this._dragStart=this._touch1=this._touch2=null};FlexMap.prototype._mouseWheel=function(t){if(!this.isDisabled){t.preventDefault();this._hideToolTip();var e=-t.deltaY;e=e>0?.1:-.1;this.zoom+=e}};return FlexMap}(t.chart.FlexChartBase);e.FlexMap=i;var n=function(){function MercatorProjection(){this.maxY=(2*Math.atan(Math.exp(Math.PI))-.5*Math.PI)/r.toRadians}MercatorProjection.prototype.convert=function(e){var i=this._convertX(e.x),n=Math.abs(e.y)>this.maxY?(e.y>0?1:-1)*this.maxY:e.y;n=this._convertY(n);return new t.Point(i,n)};MercatorProjection.prototype.convertBack=function(e){var i=this._convertBackX(e.x),n=this._convertBackY(e.y);return new t.Point(i,n)};MercatorProjection.prototype._convertX=function(t){return(t*r.toRadians+Math.PI)/r.pi2};MercatorProjection.prototype._convertBackX=function(t){return(t*r.pi2-Math.PI)/r.toRadians};MercatorProjection.prototype._convertY=function(t){return(Math.PI+Math.log(Math.tan(r.pi4-.5*t*r.toRadians)))/r.pi2};MercatorProjection.prototype._convertBackY=function(t){return-(2*Math.atan(Math.exp(t*r.pi2-Math.PI))-.5*Math.PI)/r.toRadians};return MercatorProjection}(),r=function(){function M(){}M.toRadians=Math.PI/180;M.pi4=.25*Math.PI;M.pi2=2*Math.PI;return M}()}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(t){t.map||(t.map={})}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){var i=function(){function MapLayerBase(){this.itemsSourceChanged=new t.Event}Object.defineProperty(MapLayerBase.prototype,"map",{get:function(){return this._map},set:function(t){this._map=t},enumerable:!0,configurable:!0});Object.defineProperty(MapLayerBase.prototype,"style",{get:function(){return this._style},set:function(t){if(this._style!=t){this._style=t;this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(MapLayerBase.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._setItems(t)},enumerable:!0,configurable:!0});MapLayerBase.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)};Object.defineProperty(MapLayerBase.prototype,"url",{get:function(){return this._url},set:function(e){if(this._url!=e){this._url=t.asString(e,!0);this._loadUrl()}},enumerable:!0,configurable:!0});Object.defineProperty(MapLayerBase.prototype,"colorScale",{get:function(){return this._colorScale},set:function(t){if(this._colorScale!=t){this._colorScale=t;this._clearCache();this.invalidate()}},enumerable:!0,configurable:!0});MapLayerBase.prototype.render=function(t,e,i){};MapLayerBase.prototype.invalidate=function(){this.map&&this.map.invalidate()};MapLayerBase.prototype.initialize=function(e){t.copy(this,e)};MapLayerBase.prototype._applyStyle=function(t){if(this.style){t.fill=this.style.fill;t.stroke=this.style.stroke;t.strokeWidth=this.style.strokeWidth}};MapLayerBase.prototype._clearCache=function(){};MapLayerBase.prototype._loadUrl=function(){var e=this;this.url?t.httpRequest(this.url,{success:function(t){return e.itemsSource=JSON.parse(t.responseText)}}):this.itemsSource=null};MapLayerBase.prototype._setItems=function(e){if(this._items!=e){this._clearCache();this._items=e;this.onItemsSourceChanged(new t.EventArgs);this.invalidate()}};return MapLayerBase}();e.MapLayerBase=i}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(i){__extends(ScatterMapLayer,i);function ScatterMapLayer(t){var e=i.call(this)||this;e._symbolSize=5;e._symbolMinSize=5;e._symbolMaxSize=50;e._index=0;e._prefix="_";e._elMap={};e._hasBindings=!1;e.style={stroke:"grey",strokeWidth:.5,fill:"transparent"};e.initialize(t);return e}Object.defineProperty(ScatterMapLayer.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(e){if(this._symbolSize!=e){this._symbolSize=t.asNumber(e);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"symbolMinSize",{get:function(){return this._symbolMinSize},set:function(e){if(this._symbolMinSize!=e){this._symbolMinSize=t.asNumber(e);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"symbolMaxSize",{get:function(){return this._symbolMaxSize},set:function(e){if(this._symbolMaxSize!=e){this._symbolMaxSize=t.asNumber(e);this.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._setItems(t)},enumerable:!0,configurable:!0});Object.defineProperty(ScatterMapLayer.prototype,"binding",{get:function(){return this._binding},set:function(e){if(this._binding!=e){this._binding=t.asString(e,!0);this.parseBindings();this.invalidate()}},enumerable:!0,configurable:!0});ScatterMapLayer.prototype.render=function(t,i,n){this._elMap={};this._index=0;this._prefix=this.map.layers.indexOf(this).toString()+"_";var r=t.startGroup();this.map,this.map._mapRect;this._applyStyle(t);var o=this.itemsSource,a=o?o.length:0,s=this._xBnd,h=this._yBnd,c=this._cBnd,l=this._szBnd;l&&(this._szRange=e._Utils.getRange(o,l));var u=this.colorScale;u&&u.domain(o);if(s&&h||c)for(var p=0;p<a;p++){var f=o[p];if(f){var _=this.getItemPos(f);if(_){u&&(t.fill=u.convert(u.getValue(f)));this.renderItem(t,f,_.x,_.y)}}this._index++}t.endGroup();return r};ScatterMapLayer.prototype.renderItem=function(e,i,n,r){if(t.isNumber(n)&&t.isNumber(r)){var o=this.map.convert(new t.Point(n,r));if(isFinite(o.x)&&isFinite(o.y)){var a=this.symbolSize;if(this._szRange){var s=this._szBnd.getValue(i);s=Math.sqrt((s-this._szRange.min)/this._szRange.range);a=this.symbolMinSize+(this.symbolMaxSize-this.symbolMinSize)*s}if(isFinite(a)){var h=e.drawEllipse(o.x,o.y,.5*a,.5*a);h.setAttribute("vector-effect","non-scaling-stroke");var c=this.createId();this.setId(h,c);this._elMap[c]=h}}}};ScatterMapLayer.prototype.getItemById=function(e){var i=this.itemsSource;if(i){if(this._elMap[e]){var n=parseInt(e.split("_")[1]);if(t.isNumber(n)&&n<i.length)return i[n]}}return null};ScatterMapLayer.prototype.getGeoBBox=function(){var e=this.itemsSource,i=e?e.length:0;if(this._hasBindings){for(var n=NaN,r=NaN,o=NaN,a=NaN,s=0;s<i;s++){var h=e[s];if(h){var c=this.getItemPos(h);if(c){if(isFinite(c.x)){(isNaN(n)||c.x<n)&&(n=c.x);(isNaN(r)||c.x>r)&&(r=c.x)}if(isFinite(c.y)){(isNaN(o)||c.y<o)&&(o=c.y);(isNaN(a)||c.y>a)&&(a=c.y)}}}}if(!isNaN(n)&&!isNaN(o))return new t.Rect(n,o,r-n,a-o)}return null};ScatterMapLayer.prototype.getItemPos=function(e){var i=this._xBnd,n=this._yBnd,r=this._cBnd;if(r){var o=r.getValue(e);if(o){var a=o.split(",");if(a&&a.length>=2){var s=parseFloat(a[0]),h=parseFloat(a[1]);if(isFinite(s)&&isFinite(h))return new t.Point(s,h)}}}else{s=i.getValue(e),h=n.getValue(e);t.isString(s)&&(s=parseFloat(s));t.isString(h)&&(h=parseFloat(h));if(isFinite(s)&&isFinite(h))return new t.Point(s,h)}return null};ScatterMapLayer.prototype.setId=function(t,e){t&&e&&t.setAttribute("wj-map:id",e)};ScatterMapLayer.prototype.createId=function(){return this._prefix+this._index.toString()};ScatterMapLayer.prototype.parseBindings=function(){var e=this.binding;this._xBnd=this._yBnd=this._szBnd=null;this._hasBindings=!1;if(e){var i=e.split(",");if(1==i.length){this._cBnd=new t.Binding(i[0].trim());this._hasBindings=!0}else if(i.length>=2){this._xBnd=new t.Binding(i[0].trim());this._yBnd=new t.Binding(i[1].trim());this._hasBindings=!0;i.length>=3&&(this._szBnd=new t.Binding(i[2].trim()))}}};return ScatterMapLayer}(e.MapLayerBase);e.ScatterMapLayer=i}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(){function _GeoJsonRender(){this._map={};this._index=0;this.prefix="_";this.hasPoints=!1;this.symbolSize=5}_GeoJsonRender.prototype.convert=function(t){this.converter&&(t=this.converter.convert(t));return t};_GeoJsonRender.prototype.render=function(t,e,i){void 0===i&&(i=null);this._map={};this._index=0;this.hasPoints=!1;if(e)switch(e.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":this.renderGeometry(t,e);break;case"Feature":this.renderFeature(t,e,i);break;case"FeatureCollection":if(e.features)for(var n=0;n<e.features.length;n++)this.renderFeature(t,e.features[n],i)}};_GeoJsonRender.prototype.renderFeature=function(t,e,i){void 0===i&&(i=null);if(e&&e.geometry){i&&i(t,e);var n=this.createId();this.renderGeometry(t,e.geometry,n);this._map[n]=e;this._index++}};_GeoJsonRender.prototype.renderGeometry=function(t,e,i){void 0===i&&(i=null);if(e)switch(e.type){case"Point":this.renderPoint(t,e,i);this.hasPoints=!0;break;case"MultiPoint":this.renderMultiPoint(t,e,i);this.hasPoints=!0;break;case"LineString":this.renderLineString(t,e,i);break;case"MultiLineString":this.renderMultiLineString(t,e,i);break;case"Polygon":this.renderPolygon(t,e,i);break;case"MultiPolygon":this.renderMultiPolygon(t,e,i);break;case"GeometryCollection":if(e.geometries)for(var n=0;n<e.geometries.length;n++)this.renderGeometry(t,e.geometries[n],i)}};_GeoJsonRender.prototype.renderPoint=function(e,i,n){void 0===n&&(n=null);if(i&&i.coordinates&&i.coordinates.length>=2){var r=new t.Point(i.coordinates[0],i.coordinates[1]);r=this.convert(r);var o=e.scale*this.symbolSize,a=e.drawEllipse(r.x,r.y,o,o);a.setAttribute("vector-effect","non-scaling-stroke");this.setAttribute(a,n)}};_GeoJsonRender.prototype.renderMultiPoint=function(e,i,n){void 0===n&&(n=null);if(i&&i.coordinates)for(var r=i.coordinates,o=i.coordinates.length,a=0;a<o;a++){var s=new t.Point(r[a][0],r[a][1]);s=this.convert(s);var h=e.scale*this.symbolSize,c=e.drawEllipse(s.x,s.y,h,h);this.setAttribute(c,n)}};_GeoJsonRender.prototype.renderLineString=function(e,i,n){void 0===n&&(n=null);if(i&&i.coordinates){for(var r=i.coordinates,o=i.coordinates.length,a=[],s=[],h=0;h<o;h++){var c=new t.Point(r[h][0],r[h][1]);c=this.convert(c);a.push(c.x);s.push(c.y)}var l=e.drawLines(a,s);this.setAttribute(l,n)}};_GeoJsonRender.prototype.renderMultiLineString=function(e,i,n){void 0===n&&(n=null);if(i&&i.coordinates)for(var r=i.coordinates,o=r.length,a=0;a<o;a++){for(var s=r[a],h=[],c=[],l=0;l<s.length;l++){var u=new t.Point(s[l][0],s[l][1]);u=this.convert(u);h.push(u.x);c.push(u.y)}var p=e.drawLines(h,c);this.setAttribute(p,n)}};_GeoJsonRender.prototype.renderMultiPolygon=function(e,i,n){void 0===n&&(n=null);if(i&&i.coordinates)for(var r=i.coordinates,o=r.length,a=e,s=0;s<o;s++){for(var h=r[s],c=(h.length,[]),l=0;l<1;l++){for(var u=h[l],p=[],f=0;f<u.length;f++){var _=new t.Point(u[f][0],u[f][1]);_=this.convert(_);p.push(_.x);p.push(_.y)}c.push(p)}var d=a.drawPolygon2(null,c);this.setAttribute(d,n)}};_GeoJsonRender.prototype.renderPolygon=function(e,i,n){void 0===n&&(n=null);if(i&&i.coordinates){for(var r=i.coordinates,o=r.length,a=e,s=[],h=0;h<o;h++){for(var c=r[h],l=[],u=0;u<c.length;u++){var p=new t.Point(c[u][0],c[u][1]);p=this.convert(p);l.push(p.x);l.push(p.y)}s.push(l)}var f=a.drawPolygon2(null,s);this.setAttribute(f,n)}};_GeoJsonRender.prototype.getFeatureById=function(t){return this._map[t]};_GeoJsonRender.prototype.getAllFeatures=function(t){var e=[];if(t)switch(t.type){case"Feature":e.push(t);break;case"FeatureCollection":if(t.features)for(var i=0;i<t.features.length;i++)e.push(t.features[i])}return e};_GeoJsonRender.prototype.getBBox=function(t){var e=null;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":e=this.getGeometryBBox(t);break;case"Feature":e=this.getGeometryBBox(t.geometry);break;case"FeatureCollection":if(t.features)for(var i=0;i<t.features.length;i++){var n=this.getGeometryBBox(t.features[i].geometry,e);n&&(e=n)}}return e};_GeoJsonRender.prototype.getGeometryBBox=function(t,e){var i=null;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":var n=t.coordinates,r=this.flat(n,10);i=this.getRect(r,e);break;case"GeometryCollection":if(t.geometries)for(var o=0;o<t.geometries.length;o++)(i=this.getGeometryBBox(t.geometries[o],e))&&(e=i.clone())}return i};_GeoJsonRender.prototype.getRect=function(e,i){var n=null;if(e){var r=NaN,o=NaN,a=NaN,s=NaN;if(i){r=i.left;o=i.right;a=i.top;s=i.bottom}for(var h=e.length/2,c=0;c<h;c++){var l=e[2*c],u=e[2*c+1];(isNaN(r)||l<r)&&(r=l);(isNaN(o)||l>o)&&(o=l);(isNaN(a)||u<a)&&(a=u);(isNaN(s)||u>s)&&(s=u)}isNaN(r)||isNaN(a)||(n=new t.Rect(r,a,o-r,s-a))}return n};_GeoJsonRender.prototype.setAttribute=function(t,e){t&&e&&t.setAttribute("wj-map:id",e)};_GeoJsonRender.prototype.createId=function(){return this.prefix+this._index.toString()};_GeoJsonRender.prototype.flat=function(t,e){if(t.flat)return t.flat(e);for(var i=t.slice(),n=[];i.length;){var r=i.pop();Array.isArray(r)?i.push.apply(i,r):n.push(r)}return n.reverse()};return _GeoJsonRender}();e._GeoJsonRender=i}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(i){__extends(GeoMapLayer,i);function GeoMapLayer(t){var n=i.call(this)||this;n._render=new e._GeoJsonRender;n._symbolSize=5;n.style={stroke:"gray",fill:"transparent",strokeWidth:.5};t&&n.initialize(t);return n}Object.defineProperty(GeoMapLayer.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(e){if(this._ifmt!=e){this._ifmt=t.asFunction(e,!0);this._clearCache();this.invalidate()}},enumerable:!0,configurable:!0});GeoMapLayer.prototype.getAllFeatures=function(){return this._render.getAllFeatures(this.itemsSource)};GeoMapLayer.prototype.render=function(t,e,i){this._render.hasPoints&&this._clearCache();var n=this._g;if(n)i.appendChild(n);else{n=t.startGroup();this._render.symbolSize=this.symbolSize;this._render.converter=this.map._proj;var r=this.colorScale;r&&r.domain(this.getAllFeatures());this._applyStyle(t);this._render.prefix=this.map.layers.indexOf(this).toString()+"_";r?this._render.render(t,this.itemsSource,(function(t,e){t.fill=r.convert(r.getValue(e))})):this._render.render(t,this.itemsSource,this.itemFormatter);t.endGroup();this._g=n}0==n.transform.baseVal.numberOfItems?n.transform.baseVal.appendItem(e):n.transform.baseVal.replaceItem(e,0);return n};GeoMapLayer.prototype.getGeoBBox=function(t){return t?this._render.getBBox(t):this._render.getBBox(this.itemsSource)};Object.defineProperty(GeoMapLayer.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(e){if(this._symbolSize!=e){this._symbolSize=t.asNumber(e);this.invalidate()}},enumerable:!0,configurable:!0});GeoMapLayer.prototype._clearCache=function(){this._g=null};GeoMapLayer.prototype._getFeatureById=function(t){return this._render.getFeatureById(t)};return GeoMapLayer}(e.MapLayerBase);e.GeoMapLayer=i}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){!function(e){"use strict";var i=function(e){__extends(GeoGridLayer,e);function GeoGridLayer(){var t=e.call(this)||this;t.style={stroke:"lightgrey",strokeWidth:.5,fill:"lightgrey"};return t}GeoGridLayer.prototype.render=function(e,i,n){var r=e.startGroup("wj-flexmap-geogrid"),o=this.map,a=this.map._mapRect,s="wj-label";this._applyStyle(e);for(var h=-180;h<=180;h+=30){var c=o.convert(new t.Point(h,-85)),l=o.convert(new t.Point(h,85));if(this.isValid(c)&&this.isValid(l)){var u=h.toString(),p=e.measureString(u,s);e.drawString(u,new t.Point(c.x-.5*p.width,a.top+p.height),s);e.drawLine(c.x,c.y,l.x,l.y)}}for(var f=a.left,_=-80;_<=80;_+=20){c=o.convert(new t.Point(-180,_)),l=o.convert(new t.Point(180,_));if(this.isValid(c)&&this.isValid(l)){u=f.toString(),p=e.measureString(u,s);e.drawString(_.toString(),new t.Point(f,c.y+.5*p.height),s);e.drawLine(c.x,c.y,l.x,l.y)}}e.endGroup();return r};GeoGridLayer.prototype.isValid=function(t){return isFinite(t.x)&&isFinite(t.y)};return GeoGridLayer}(e.MapLayerBase);e.GeoGridLayer=i}(e.map||(e.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));!function(t){!function(e){e.map||(e.map={}),t._registerModule("wijmo.chart.map",t.chart.map)}(t.chart||(t.chart={}))}(wijmo||(wijmo={}));
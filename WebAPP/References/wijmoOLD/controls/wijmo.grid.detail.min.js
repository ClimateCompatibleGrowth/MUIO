/*!
    *
    * Wijmo Library 5.20213.824
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */

var wijmo,__extends=this&&this.__extends||function(){var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();!function(e){!function(t){!function(t){"use strict";var i=function(e){__extends(DetailRow,e);function DetailRow(t){var i=e.call(this)||this;i.isReadOnly=!0;return i}Object.defineProperty(DetailRow.prototype,"detail",{get:function(){return this._detail},set:function(e){this._detail=e},enumerable:!0,configurable:!0});return DetailRow}(e.grid.Row);t.DetailRow=i}(t.detail||(t.detail={}))}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));!function(e){var t;(function(t){"use strict";var i=function(i){__extends(DetailMergeManager,i);function DetailMergeManager(e){var t=i.call(this)||this;t._originalMergeManager=e.mergeManager;return t}DetailMergeManager.prototype.getMergedRange=function(i,r,n,o){void 0===o&&(o=!0);switch(i.cellType){case e.grid.CellType.Cell:if(i.rows[r]instanceof t.DetailRow){i.columns.frozen>0&&i.grid&&(i.grid.cloneFrozenCells=!1);return new e.grid.CellRange(r,0,r,i.columns.length-1)}break;case e.grid.CellType.RowHeader:var l=_isFrozen(i,r),a=_isNew(i,r),s=i.rows[r].dataItem;!s&&r>0&&i.rows[r]instanceof t.DetailRow&&(s=i.rows[r-1].dataItem);for(var d=r;d>0&&i.rows[d-1].dataItem==s&&_isFrozen(i,d-1)==l&&_isNew(i,d-1)==a;)d--;for(var c=r;c<i.rows.length-1&&i.rows[c+1].dataItem==s&&_isFrozen(i,c+1)==l&&_isNew(i,c+1)==a;)c++;c<i.rows.length-1&&i.rows[c+1]instanceof t.DetailRow&&_isFrozen(i,c+1)==l&&_isNew(i,c+1)==a&&c++;return d!=c?new e.grid.CellRange(d,n,c,n):null}return this._originalMergeManager.getMergedRange(i,r,n,o)};return DetailMergeManager}(e.grid.MergeManager);t.DetailMergeManager=i;function _isFrozen(e,t){return t<e.rows.frozen}function _isNew(t,i){return t.rows[i]instanceof e.grid._NewRowTemplate}})((t=e.grid||(e.grid={})).detail||(t.detail={}))}(wijmo||(wijmo={}));!function(e){var t;(function(t){"use strict";e._addCultureInfo("FlexGridDetailProvider",{ariaLabels:{toggleDetail:"Toggle Row Detail"}});var i,r;!function(e){e[e.None=0]="None";e[e.ToggleDetail=1]="ToggleDetail"}(i=t.KeyAction||(t.KeyAction={}));!function(e){e[e.Code=0]="Code";e[e.Selection=1]="Selection";e[e.ExpandSingle=2]="ExpandSingle";e[e.ExpandMulti=3]="ExpandMulti"}(r=t.DetailVisibilityMode||(t.DetailVisibilityMode={}));var n=function(){function FlexGridDetailProvider(n,o){var l=this;this._maxHeight=null;this._mode=r.ExpandSingle;this._animated=!1;this._keyActionEnter=i.None;this._g=n;n.mergeManager=new t.DetailMergeManager(n);n.rowHeaders.hostElement.addEventListener("click",this._hdrClick.bind(this));n.rowHeaders.hostElement.addEventListener("mousedown",(function(e){var t=n.editableCollectionView;if(n.activeEditor||t&&t.currentEditItem){l._hdrClick(e);e.preventDefault()}}));setTimeout((function(){n.formatItem.addHandler(l._formatItem,l)}),100);n.selectionChanged.addHandler(this._selectionChanged,this);n.resizedRow.addHandler(this._resizedRow,this);n.loadingRows.addHandler((function(){return l.hideDetail()}));n.deletingRow.addHandler((function(e,t){l.hideDetail(t.row)}));n.updatedView.addHandler(this._handleFrozenCells,this);n.cloneFrozenCells=!1;n.draggingRow.addHandler((function(e,i){if(i.row<e.rows.length-1&&e.rows[i.row+1]instanceof t.DetailRow){i.cancel=!0;l.hideDetail(i.row)}}));n.hostElement.addEventListener("keydown",(function(t){if(t.keyCode==e.Key.Enter&&l._keyActionEnter==i.ToggleDetail){var r=l._g.selection.row;l._toggleRowDetail(r)&&t.preventDefault()}}),!0);n._root.addEventListener("scroll",(function(){e.Control.refreshAll(n._root)}));e.copy(this,o)}Object.defineProperty(FlexGridDetailProvider.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"detailVisibilityMode",{get:function(){return this._mode},set:function(t){if((t=e.asEnum(t,r))!=this._mode){this._mode=t;this.hideDetail();this._g.invalidate()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){if((t=e.asNumber(t,!0))!=this._maxHeight){this._maxHeight=t;this.hideDetail()}},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"isAnimated",{get:function(){return this._animated},set:function(t){t!=this._animated&&(this._animated=e.asBoolean(t))},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"keyActionEnter",{get:function(){return this._keyActionEnter},set:function(t){this._keyActionEnter=e.asEnum(t,i)},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"createDetailCell",{get:function(){return this._createDetailCellFn},set:function(t){this._createDetailCellFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"disposeDetailCell",{get:function(){return this._disposeDetailCellFn},set:function(t){this._disposeDetailCellFn=e.asFunction(t,!0)},enumerable:!0,configurable:!0});Object.defineProperty(FlexGridDetailProvider.prototype,"rowHasDetail",{get:function(){return this._rowHasDetailFn},set:function(t){if((t=e.asFunction(t,!0))!=this._rowHasDetailFn){this._rowHasDetailFn=t;this.hideDetail();this._g.invalidate()}},enumerable:!0,configurable:!0});FlexGridDetailProvider.prototype.getDetailRow=function(e){for(var i=this._g.rows,r=this._toIndex(e),n=i[r].dataItem;r<i.length;r++){var o=i[r];if(o instanceof t.DetailRow)return o;if(o.dataItem!=n)return null}return null};FlexGridDetailProvider.prototype.isDetailVisible=function(e){return null!=this.getDetailRow(e)};FlexGridDetailProvider.prototype.isDetailAvailable=function(e){e=this._toIndex(e);return this._hasDetail(e)};FlexGridDetailProvider.prototype.hideDetail=function(i){var r=this._g,n=r.rows;if(null!=i){for(var o=this._toIndex(i);!(n[o]instanceof t.DetailRow)&&o<n.length-1;)o++;var l=n[o];if(l instanceof t.DetailRow){var a=l.detail.parentElement;if(a)for(var s=a.querySelectorAll(".wj-control"),d=0;d<s.length;d++){var c=e.Control.getControl(s[d]);c&&c.containsFocus()&&r.focus(!0)}var u=this.disposeDetailCell;u&&u(l)||e.Control.disposeAll(l.detail);n.removeAt(o)}}else for(var h=0;h<n.length;h++)n[h]instanceof t.DetailRow&&this.hideDetail(h)};FlexGridDetailProvider.prototype.showDetail=function(i,r){void 0===r&&(r=!1);var n=this._g,o=n.rows,l=this._toIndex(i);l>0&&o[l]instanceof t.DetailRow&&l--;for(var a=o[l].dataItem;l<o.length-1&&o[l+1].dataItem==a;)l++;if(r){for(var s=n.selection,d=!1,c=0;c<o.length-1;c++)if(c!=l&&o[c+1]instanceof t.DetailRow){this.hideDetail(c);c<l&&l--;if(c<s.row){s.row--;s.row2--;d=!0}}d&&n.select(s,!1)}if(!this.isDetailVisible(l)&&this._hasDetail(l)){var u=new t.DetailRow(o[l]),h=this._createDetailCell(o[l]);u.detail=h;if(h){o.insert(l+1,u);var f=n.containsFocus();if(this._animated){var g=h.style;g.transform="translateY(-100%)";g.opacity="0";e.animate((function(t){if(t<1){g.transform="translateY("+(100*-(1-t)).toFixed(0)+"%)";g.opacity=(t*t).toString()}else{g.transform=g.opacity="";e.Control.invalidateAll(h);f&&n.scrollIntoView(l+1,-1)}}))}else f&&n.scrollIntoView(l+1,-1,!0)}}};FlexGridDetailProvider.prototype._sizeDetailRow=function(t){var i=this._g,r=t.detail;e.Control.refreshAll(r);var n=r.offsetHeight+i._cellPadVert+1,o=this._maxHeight;e.isNumber(o)&&o>0&&n>o&&(n=o);t.height=n;r.style.height||(r.style.height="100%");var l=r.querySelector(".wj-flexgrid");l&&!l.style.height&&(l.style.height="100%")};FlexGridDetailProvider.prototype._handleFrozenCells=function(){var t=this._g,i=t.hostElement,r=e.Control.getControl(i.querySelector(".wj-flexgrid"));if(r instanceof e.grid.FlexGrid&&(r.frozenRows||r.frozenColumns)){e.setCss([t._eTL,t._eBL,t._eCHdr,t._eCFtr,t._eRHdr,t._eMarquee],{zIndex:"13"});for(var n=i.querySelectorAll(".wj-frozen"),o=0;o<n.length;o++){var l=n[o];if(e.closest(l,".wj-flexgrid")==i){var a=parseInt(l.style.zIndex);l.style.zIndex=(a%10+10).toString()}}}};FlexGridDetailProvider.prototype._toIndex=function(t){return t instanceof e.grid.Row?t.index:e.asNumber(t)};FlexGridDetailProvider.prototype._hdrClick=function(t){if(!t.defaultPrevented&&0==t.button&&e.closestClass(t.target,FlexGridDetailProvider._WJC_DETAIL)){var i=r;switch(this._mode){case i.ExpandMulti:case i.ExpandSingle:var n=this._g,o=n.hitTest(t.target);o.panel||(o=n.hitTest(t));o.panel&&this._toggleRowDetail(o.row)&&t.preventDefault()}}};FlexGridDetailProvider.prototype._toggleRowDetail=function(t){if(t>-1){if(this.isDetailVisible(t)){this.hideDetail(t);return!0}if(this._hasDetail(t)){var i=this._g;i.select(new e.grid.CellRange(t,0,t,i.columns.length-1));this.showDetail(t,this._mode==r.ExpandSingle);return!0}}return!1};FlexGridDetailProvider.prototype._selectionChanged=function(e,t){var i=this;if(this._mode==r.Selection){this._toSel&&clearTimeout(this._toSel);this._toSel=setTimeout((function(){var t=e._selHdl.selection.row;t>-1?i.showDetail(t,!0):i.hideDetail()}),300)}};FlexGridDetailProvider.prototype._formatItem=function(i,n){var o=this._g,l=n.cell,a=n.getRow(),s=r;if(n.panel==o.cells&&a instanceof t.DetailRow&&null!=a.detail&&!e.hasClass(l,"wj-detail")){e.addClass(l,"wj-detail");l.textContent="";l.style.textAlign=l.style.zIndex="";l.className=l.className.replace(/wj\-align\-[\S]+/g,"");l.appendChild(a.detail);null==a.height?this._sizeDetailRow(a):e.Control.refreshAll(a.detail)}if(n.panel==o.rowHeaders&&0==n.col&&this._hasDetail(n.row)){l.style.cursor="";switch(this._mode){case s.ExpandMulti:case s.ExpandSingle:var d=this.isDetailVisible(n.row),c=d?"minus":"plus",u=FlexGridDetailProvider._WJC_DETAIL;l.innerHTML='<div class="wj-btn wj-btn-glyph '+u+'" role="button" tabindex="-1"><span class="wj-glyph-'+c+'"></span></div>';var h=l.children[0],f=e.culture.FlexGridDetailProvider.ariaLabels.toggleDetail;e.setAriaLabel(h,f);e.setAttribute(h,"aria-expanded",d)}}};FlexGridDetailProvider.prototype._resizedRow=function(i,r){var n=r.getRow();n instanceof t.DetailRow&&n.detail&&e.Control.refreshAll(n.detail)};FlexGridDetailProvider.prototype._hasDetail=function(t){var i=this._g.rows[t];return e.isFunction(this._rowHasDetailFn)?this._rowHasDetailFn(i):this._isRegularRow(i)};FlexGridDetailProvider.prototype._isRegularRow=function(i){return!(i instanceof e.grid._NewRowTemplate||i instanceof t.DetailRow||i instanceof e.grid.GroupRow&&!this._g.childItemsPath)};FlexGridDetailProvider.prototype._createDetailCell=function(e){return this.createDetailCell?this.createDetailCell(e):null};FlexGridDetailProvider._WJC_DETAIL="wj-elem-detail";return FlexGridDetailProvider}();t.FlexGridDetailProvider=n})((t=e.grid||(e.grid={})).detail||(t.detail={}))}(wijmo||(wijmo={}));!function(e){!function(t){t.detail||(t.detail={}),e._registerModule("wijmo.grid.detail",e.grid.detail)}(e.grid||(e.grid={}))}(wijmo||(wijmo={}));